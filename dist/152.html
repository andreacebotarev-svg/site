<!DOCTYPE html>
<html lang="ru">
<head>
<meta name="referrer" content="no-referrer">
  <meta charset="UTF-8" />
  <title>Super Cool Super Cook ‚Äì Complete Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <style>
    :root {
      --primary: #ff6348;
      --accent: #ffa502;
      --dark: #2f3542;
      --light: #f1f2f6;
      --success: #2ed573;
      --error: #ff4757;
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    /* –°–∫—Ä–æ–ª–ª–±–∞—Ä */
    ::-webkit-scrollbar { width: 12px; }
    ::-webkit-scrollbar-track { background: var(--light); }
    ::-webkit-scrollbar-thumb { background: linear-gradient(var(--primary), var(--accent)); border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: var(--dark);
      padding: 10px;
      font-size: 16px;
      background-attachment: fixed;
    }

    .app-shell {
      max-width: 1200px;
      margin: 0 auto;
      background: #fff;
      border-radius: 20px;
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      min-height: 90vh;
    }

    .app-background {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: url('https://images.unsplash.com/photo-1543339308-4abebd33b5b9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') no-repeat center center;
      background-size: cover;
      opacity: 0.08;
      pointer-events: none;
    }

    header {
      background: linear-gradient(120deg, var(--primary), #ee5a6f);
      color: #fff;
      padding: 25px;
      text-align: center;
      position: relative;
      z-index: 10;
    }
    h1 { margin: 0; font-size: 2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
    .subtitle { margin-top: 8px; font-size: 1rem; opacity: 0.95; }

    nav {
      display: flex;
      flex-wrap: wrap;
      background: #fff;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .tab {
      flex: 1 1 100px;
      padding: 14px;
      border: none;
      background: transparent;
      font-size: 0.95rem;
      font-weight: 600;
      color: #7f8fa6;
      cursor: pointer;
      transition: all 0.2s;
      border-bottom: 3px solid transparent;
    }
    .tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
      background: #fff8f7;
    }
    .tab:hover:not(.active) { background: #f7f8fa; }

    main { padding: 30px; z-index: 10; position: relative; padding-bottom: 100px; }
    section { display: none; animation: fadeIn 0.3s; }
    section.active { display: block; }

    h2 {
      border-left: 5px solid var(--primary);
      padding-left: 15px;
      margin-bottom: 25px;
      font-size: 1.7rem;
    }
    h3 { margin: 20px 0 10px; color: var(--dark); font-size: 1.3rem; }

    /* FACTS & TEXT */
    .fact-box {
      background: #2f3542;
      color: #fff;
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 25px;
      border: 3px dashed var(--accent);
    }
    .fact-box h3 { color: var(--accent); border-bottom: 1px solid #555; padding-bottom: 10px; margin-top: 0; }
    .fact-row { margin: 8px 0; font-size: 1.05rem; }
    .label { color: var(--success); font-weight: bold; }

    .text-box {
      background: #fff;
      padding: 25px;
      border-radius: 15px;
      line-height: 1.8;
      font-size: 1.1rem;
      border: 2px solid #e1e8ed;
    }
    
    /* TOOLTIPS & HIGHLIGHTS */
    .highlight {
      background: #fff3cd;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
      cursor: pointer;
      position: relative;
      display: inline-block;
      border-bottom: 2px dotted #ffa502;
    }
    .tooltip {
      visibility: hidden;
      opacity: 0;
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: #2f3542;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      white-space: nowrap;
      font-size: 0.9rem;
      transition: opacity 0.2s;
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .tooltip::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #2f3542 transparent transparent transparent;
    }
    .highlight:hover .tooltip { visibility: visible; opacity: 1; }

    /* PHRASES */
    .phrases-box {
      background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
      padding: 25px;
      border-radius: 15px;
      border-left: 8px solid var(--primary);
      margin: 20px 0;
    }
    .phrase-item {
      margin: 12px 0;
      font-size: 1.05rem;
      padding: 8px 0;
      border-bottom: 1px dashed rgba(0,0,0,0.1);
    }

    /* VOCABULARY STYLES */
    .vocab-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    .vocab-section {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #eee;
    }
    .vocab-item {
      padding: 10px 15px;
      border-bottom: 1px dashed #ddd;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
      margin-bottom: 8px;
      border-radius: 8px;
      transition: transform 0.2s;
    }
    .vocab-item:hover { transform: translateX(5px); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    .vocab-en { font-weight: bold; color: var(--dark); cursor: pointer; display: flex; align-items: center; gap: 8px; }
    .vocab-ru { color: #7f8fa6; font-style: italic; }

    /* FLASHCARDS GRID */
    .flashcard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
    }
    .flashcard-container {
      perspective: 1000px;
      height: 180px;
      cursor: pointer;
    }
    .flashcard {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      border-radius: 16px;
    }
    .flashcard-container.flipped .flashcard {
      transform: rotateY(180deg);
    }
    .flashcard-front, .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 15px;
      border-radius: 16px;
      border: 2px solid #f1f2f6;
    }
    .flashcard-front { background: #fff; font-weight: bold; font-size: 1.2rem; color: var(--dark); }
    .flashcard-back { background: #e0f7fa; transform: rotateY(180deg); font-size: 1.1rem; color: #006064; }
    
    /* GRAMMAR & QUIZ */
    .grammar-card {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      border-left: 6px solid var(--success);
      margin-bottom: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.03);
    }
    .grammar-card.negative { border-left-color: var(--error); }
    
    .quiz-item {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      border: 2px solid #e1e8ed;
      margin-bottom: 15px;
    }
    .options { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-top: 15px; }
    .opt-btn {
      padding: 12px;
      background: #fff;
      border: 2px solid #dfe4ea;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      text-align: center;
      transition: all 0.2s;
    }
    .opt-btn:hover:not(:disabled) { border-color: var(--primary); background: #fff5f5; }
    .opt-btn.correct { background: var(--success); color: white; border-color: var(--success); }
    .opt-btn.wrong { background: var(--error); color: white; border-color: var(--error); opacity: 0.8; }

    .btn { padding: 10px 20px; border-radius: 25px; border: none; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    .btn-primary { background: var(--primary); color: white; }
    .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
    .btn-outline:hover { background: var(--primary); color: #fff; }

    /* UTILS */
    .sticky-progress {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%; max-width: 500px;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      padding: 12px 20px;
      border-radius: 50px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      display: flex; align-items: center; gap: 15px;
      z-index: 1000;
      border: 1px solid #e1e8ed;
    }
    .bar-track { flex: 1; height: 10px; background: #dfe4ea; border-radius: 10px; overflow: hidden; }
    .bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--accent)); transition: width 0.5s; }

    .speaker-icon {
      font-size: 1.2rem;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s, transform 0.2s;
    }
    .speaker-icon:hover { opacity: 1; transform: scale(1.2); }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @media (max-width: 768px) {
      nav { overflow-x: auto; flex-wrap: nowrap; }
      .tab { white-space: nowrap; }
    }
  </style>
</head>
<body>

<div class="app-shell">
  <div class="app-background"></div>
  <header>
    <h1>üçï Super Cool Super Cook</h1>
    <p class="subtitle">Interactive Lesson: Likes & Dislikes + Food</p>
  </header>

  <nav>
    <button class="tab active" onclick="switchTab('text')">üìñ Text</button>
    <button class="tab" onclick="switchTab('phrases')">üí¨ Phrases</button>
    <button class="tab" onclick="switchTab('vocab')">üìö Vocabulary</button>
    <button class="tab" onclick="switchTab('grammar')">‚úèÔ∏è Grammar</button>
    <button class="tab" onclick="switchTab('practice')">‚ö° Practice</button>
  </nav>

  <main>
    <section id="text" class="active">
      <h2>Reading: Super Cool Super Cook</h2>
  
      <div class="fact-box">
        <h3>üìã Fact File: Sam Stern</h3>
        <div class="fact-row"><span class="label">First book:</span> Cooking up a Storm (2005)</div>
        <div class="fact-row"><span class="label">Loves:</span> roast chicken, Chinese food</div>
        <div class="fact-row"><span class="label">Hates:</span> bananas and broccoli</div>
        <div class="fact-row"><span class="label">Interests:</span> football, climbing, music</div>
      </div>

      <div class="text-box">
        <p><strong>Sam Stern</strong> is a <span class="highlight" data-ru="–∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π –ø–æ–≤–∞—Ä">celebrity chef</span> and a <span class="highlight" data-ru="–∞–≤—Ç–æ—Ä –∫—É–ª–∏–Ω–∞—Ä–Ω—ã—Ö –∫–Ω–∏–≥">cookery book writer</span>.
        But he's a student, too! His recipes are fast, easy and healthy.
        He often <span class="highlight" data-ru="–Ω–æ—Å–∏—Ç –ø–∏—Ä–æ–≥–∏ –≤ —à–∫–æ–ª—É">takes cakes into school</span> for his classmates.
        Lucky them!</p>

        <p>Sam <span class="highlight" data-ru="–ª—é–±–∏—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å">likes experimenting</span> with food and he <span class="highlight" data-ru="–∏–∑–æ–±—Ä–µ—Ç–∞–µ—Ç">invents</span> a new recipe each week.
        He <span class="highlight" data-ru="–Ω–µ–Ω–∞–≤–∏–¥–∏—Ç –ø–∏—Å–∞—Ç—å">hates writing</span> about the recipes so he and his mum <span class="highlight" data-ru="–≥–æ—Ç–æ–≤—è—Ç –≤–º–µ—Å—Ç–µ">cook together</span>.
        Then she writes the recipes down.</p>

        <p>Cooking is a problem in his house.
        The problem is, there are seven people in Sam's family ‚Äì his parents, his brother and his three sisters, and they're all different!
        One sister is a <span class="highlight" data-ru="–≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü">vegetarian</span> but his brother <span class="highlight" data-ru="–æ–±–æ–∂–∞–µ—Ç –º—è—Å–æ">loves meat</span> and his dad <span class="highlight" data-ru="–Ω–µ –µ—Å—Ç">doesn't eat</span> chocolate or cheese.</p>

        <p>Sam is very busy.
        He writes a <span class="highlight" data-ru="–±–ª–æ–≥">blog</span> on his website and a weekly article in a <span class="highlight" data-ru="–ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –≥–∞–∑–µ—Ç–∞">teen newspaper</span>.
        In the blog, he talks about his life and recipes. He wants teenagers to cook healthy food.
        Lots of teenagers read Sam's blog and try his recipes.
        And he's got a brilliant new idea ‚Äì <span class="highlight" data-ru="–∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω">phone downloads</span> of his recipes!</p>
      </div>

      <div style="display: flex; justify-content: center; margin-top: 25px;">
        <img src="https://images.unsplash.com/photo-1556910103-1c02745a30bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Cooking Friends" style="max-width: 100%; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
      </div>
    </section>

    <section id="phrases">
      <h2>Phrases to Know üîä</h2>
      <div class="phrases-box">
        <h3 style="margin-top:0; color:var(--primary);">üí¨ Common Food Expressions</h3>
        <div class="phrase-item">üçè <strong>It's healthy.</strong> ‚Äî –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ</div>
        <div class="phrase-item">üçü <strong>It's unhealthy.</strong> ‚Äî –≠—Ç–æ –≤—Ä–µ–¥–Ω–æ</div>
        <div class="phrase-item">ü•¶ <strong>(Fruit) is good for you.</strong> ‚Äî (–§—Ä—É–∫—Ç—ã) –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è —Ç–µ–±—è</div>
        <div class="phrase-item">üç© <strong>(Crisps) aren't good for you.</strong> ‚Äî (–ß–∏–ø—Å—ã) –Ω–µ –ø–æ–ª–µ–∑–Ω—ã</div>
        <div class="phrase-item">üçï <strong>(Crisps) are bad for you.</strong> ‚Äî (–ß–∏–ø—Å—ã) –≤—Ä–µ–¥–Ω—ã –¥–ª—è —Ç–µ–±—è</div>
        <div class="phrase-item">üçî <strong>It's junk food.</strong> ‚Äî –≠—Ç–æ –≤—Ä–µ–¥–Ω–∞—è –µ–¥–∞</div>
        <div class="phrase-item">‚òï <strong>I can't live without (coffee)!</strong> ‚Äî –ñ–∏—Ç—å –Ω–µ –º–æ–≥—É –±–µ–∑ (–∫–æ—Ñ–µ)!</div>
        <div class="phrase-item">ü•§ <strong>I prefer (juice).</strong> ‚Äî –Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é (—Å–æ–∫)</div>
      </div>
    </section>

    <section id="vocab">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2>Key Vocabulary üìñ</h2>
        <button class="btn btn-outline" id="flashcard-toggle" onclick="toggleFlashcards()">üîÑ –†–µ–∂–∏–º –∫–∞—Ä—Ç–æ—á–µ–∫</button>
      </div>
      
      <div id="vocab-container"></div>
    </section>

    <section id="grammar">
      <h2>Grammar: like/love/hate + -ing</h2>

      <div class="grammar-card">
        <h3>‚úÖ Positive Forms</h3>
        <p><strong>I / You / We / They</strong> <strong style="color:var(--success);">like cooking</strong>.</p>
        <p><strong>He / She / It</strong> <strong style="color:var(--success);">likes cooking</strong>.</p>
        <p style="margin-top:12px; font-style:italic; color:#7f8fa6;">Example: I love making pizzas. ‚Äî –Ø –æ–±–æ–∂–∞—é –≥–æ—Ç–æ–≤–∏—Ç—å –ø–∏—Ü—Ü—É.</p>
      </div>

      <div class="grammar-card negative">
        <h3>‚ùå Negative Forms</h3>
        <p><strong>I / You / We / They</strong> <strong style="color:var(--error);">don't like eating</strong> vegetables.</p>
        <p><strong>He / She / It</strong> <strong style="color:var(--error);">doesn't like eating</strong> vegetables.</p>
        <p style="margin-top:12px; font-style:italic; color:#7f8fa6;">Example: Alex doesn't like studying Maths.</p>
      </div>

      <div style="background:#fff3cd; padding:20px; border-radius:12px; margin-top:20px; border-left:6px solid var(--accent);">
        <h3 style="margin-top:0;">üí° Important Rule</h3>
        <p>–ü–æ—Å–ª–µ –≥–ª–∞–≥–æ–ª–æ–≤ <strong>like</strong>, <strong>love</strong>, <strong>hate</strong>, <strong>don't like</strong> –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ <strong>–≥–ª–∞–≥–æ–ª + -ing</strong>.</p>
        <ul style="margin-left:20px; margin-top:8px;">
          <li>I love <strong>cooking</strong>. (–Ω–µ "to cook")</li>
          <li>She hates <strong>washing up</strong>. (–Ω–µ "to wash up")</li>
        </ul>
      </div>
    </section>

    <section id="practice">
      <h2>Practice Quiz üèÜ</h2>
      <div style="margin-bottom:20px;">
        <button class="btn btn-outline" onclick="resetPractice()">üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
      </div>

      <div id="quiz-container"></div>

      <div class="sticky-progress" id="progress-hud" style="display:none;">
        <span style="font-size:1.5rem;">üéØ</span>
        <div class="bar-track">
          <div class="bar-fill" id="p-bar"></div>
        </div>
        <strong id="score-display" style="font-size:1.2rem;">0 / 25</strong>
      </div>
    </section>

  </main>
</div>

<script>
// ========== DATA SOURCE (SINGLE TRUTH) ==========
const vocabData = [
  {
    category: "üç≥ Cooking & Food",
    items: [
      { en: "roast chicken", ru: "–∂–∞—Ä–µ–Ω–∞—è –∫—É—Ä–∏—Ü–∞" },
      { en: "Chinese food", ru: "–∫–∏—Ç–∞–π—Å–∫–∞—è –µ–¥–∞" },
      { en: "recipe", ru: "—Ä–µ—Ü–µ–ø—Ç" },
      { en: "healthy food", ru: "–∑–¥–æ—Ä–æ–≤–∞—è –µ–¥–∞" },
      { en: "vegetarian", ru: "–≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü" },
      { en: "cook together", ru: "–≥–æ—Ç–æ–≤–∏—Ç—å –≤–º–µ—Å—Ç–µ" },
      { en: "invent", ru: "–∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å" }
    ]
  },
  {
    category: "üìù Activities & Hobbies",
    items: [
      { en: "tidying your room", ru: "—É–±–∏—Ä–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É" },
      { en: "washing up", ru: "–º—ã—Ç—å –ø–æ—Å—É–¥—É" },
      { en: "eating salad", ru: "–µ—Å—Ç—å —Å–∞–ª–∞—Ç" },
      { en: "drinking tea", ru: "–ø–∏—Ç—å —á–∞–π" },
      { en: "going shopping", ru: "—Ö–æ–¥–∏—Ç—å –∑–∞ –ø–æ–∫—É–ø–∫–∞–º–∏" },
      { en: "playing video games", ru: "–∏–≥—Ä–∞—Ç—å –≤ –≤–∏–¥–µ–æ–∏–≥—Ä—ã" },
      { en: "listening to music", ru: "—Å–ª—É—à–∞—Ç—å –º—É–∑—ã–∫—É" }
    ]
  },
  {
    category: "üé§ Sam's Life",
    items: [
      { en: "celebrity chef", ru: "–∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π –ø–æ–≤–∞—Ä" },
      { en: "cookery book writer", ru: "–∞–≤—Ç–æ—Ä –∫—É–ª–∏–Ω–∞—Ä–Ω—ã—Ö –∫–Ω–∏–≥" },
      { en: "blog", ru: "–±–ª–æ–≥" },
      { en: "teen newspaper", ru: "–ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –≥–∞–∑–µ—Ç–∞" },
      { en: "phone downloads", ru: "–∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω" },
      { en: "climbing", ru: "—Å–∫–∞–ª–æ–ª–∞–∑–∞–Ω–∏–µ" },
      { en: "going to gigs", ru: "—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç—ã" }
    ]
  },
  {
    category: "üòä Feelings",
    items: [
      { en: "üòçüòç love", ru: "–æ–±–æ–∂–∞—Ç—å", clean: "love" },
      { en: "üòä like", ru: "–Ω—Ä–∞–≤–∏—Ç—Å—è", clean: "like" },
      { en: "‚òπÔ∏è don't like", ru: "–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è", clean: "don't like" },
      { en: "üò°üò° hate", ru: "–Ω–µ–Ω–∞–≤–∏–¥–µ—Ç—å", clean: "hate" }
    ]
  }
];

const quizData = [
    { q: "1. Alex ___ studying Maths. (‚òπÔ∏è)", opts: ["don't like", "doesn't like", "isn't like"], correct: 1, explain: "Alex (he) —Ç—Ä–µ–±—É–µ—Ç doesn't like." },
    { q: "2. Sarah ___ dancing. (üòçüòç)", opts: ["love", "loves", "loving"], correct: 1, explain: "Sarah (she) ‚Üí loves (—Å -s)." },
    { q: "3. I ___ making pizzas. (üòçüòç)", opts: ["love", "loves", "am loving"], correct: 0, explain: "–° I –∏—Å–ø–æ–ª—å–∑—É–µ–º love –±–µ–∑ -s." },
    { q: "4. They ___ playing video games. (üòçüòç)", opts: ["loves", "love", "loving"], correct: 1, explain: "They love (–±–µ–∑ -s)." },
    { q: "5. We ___ tidying our room. (‚òπÔ∏è)", opts: ["doesn't like", "don't like", "not like"], correct: 1, explain: "We don't like." },
    { q: "6. Sam ___ experimenting with food. (üòä)", opts: ["like", "likes", "liking"], correct: 1, explain: "Sam (he) likes." },
    { q: "7. ___ she like drinking coffee?", opts: ["Do", "Does", "Is"], correct: 1, explain: "–í–æ–ø—Ä–æ—Å —Å she –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å Does." },
    { q: "8. Choose correct: (üò°)", opts: ["I hate washing up.", "I hate wash up.", "I hating wash up."], correct: 0, explain: "–ü–æ—Å–ª–µ hate ‚Üí –≥–ª–∞–≥–æ–ª —Å -ing." },
    { q: "9. Choose correct: (üòä)", opts: ["Alex like watching sport.", "Alex likes watching sport.", "Alex liking watch sport."], correct: 1, explain: "Alex likes + watching." },
    { q: "10. Choose correct: (‚òπÔ∏è)", opts: ["You doesn't like reading.", "You don't like reading books.", "You not like read."], correct: 1, explain: "You don't like + reading." },
    { q: "11. What does Sam HATE doing?", opts: ["Cooking", "Writing about recipes", "Eating chicken"], correct: 1, explain: "–¢–µ–∫—Å—Ç: 'He hates writing about the recipes'." },
    { q: "12. Who is the vegetarian in Sam's family?", opts: ["His dad", "His brother", "One of his sisters"], correct: 2, explain: "–¢–µ–∫—Å—Ç: 'One sister is a vegetarian'." },
    { q: "13. What is Sam's brilliant new idea?", opts: ["Phone downloads of recipes", "Opening a restaurant", "A TV show"], correct: 0, explain: "–¢–µ–∫—Å—Ç: 'phone downloads of his recipes'." },
    { q: "14. Sam is also a...", opts: ["Teacher", "Student", "Doctor"], correct: 1, explain: "–¢–µ–∫—Å—Ç: 'But he's a student, too!'" },
    { q: "15. Who writes recipes down for Sam?", opts: ["His teacher", "His mother", "His classmates"], correct: 1, explain: "–¢–µ–∫—Å—Ç: 'Then she writes the recipes down.'" },
    { q: "16. What is 'roast chicken'?", opts: ["–í–∞—Ä–µ–Ω–∞—è –∫—É—Ä–∏—Ü–∞", "–ñ–∞—Ä–µ–Ω–∞—è/–ó–∞–ø–µ—á–µ–Ω–Ω–∞—è –∫—É—Ä–∏—Ü–∞", "–ö—É—Ä–∏–Ω—ã–π —Å—É–ø"], correct: 1, explain: "Roast = –∂–∞—Ä–µ–Ω—ã–π/–∑–∞–ø–µ—á–µ–Ω–Ω—ã–π." },
    { q: "17. Translate: 'It's junk food'", opts: ["–≠—Ç–æ –∑–¥–æ—Ä–æ–≤–∞—è –µ–¥–∞", "–≠—Ç–æ –≤—Ä–µ–¥–Ω–∞—è –µ–¥–∞", "–≠—Ç–æ –≤–∫—É—Å–Ω–∞—è –µ–¥–∞"], correct: 1, explain: "Junk food = –≤—Ä–µ–¥–Ω–∞—è –µ–¥–∞." },
    { q: "18. Translate: 'I can't live without coffee!'", opts: ["–Ø –Ω–µ –ª—é–±–ª—é –∫–æ—Ñ–µ", "–Ø –∂–∏—Ç—å –Ω–µ –º–æ–≥—É –±–µ–∑ –∫–æ—Ñ–µ", "–ö–æ—Ñ–µ –≤—Ä–µ–¥–µ–Ω"], correct: 1, explain: "Can't live without = –∂–∏—Ç—å –Ω–µ –º–æ–≥—É –±–µ–∑." },
    { q: "19. Fruit ___ good for you.", opts: ["is", "are", "isn't"], correct: 0, explain: "Fruit (–Ω–µ–∏—Å—á–∏—Å–ª—è–µ–º–æ–µ) ‚Üí is good." },
    { q: "20. Crisps ___ good for you.", opts: ["is", "are", "aren't"], correct: 2, explain: "Crisps (–º–Ω–æ–∂. —á–∏—Å–ª–æ) aren't good." },
    { q: "21. He ___ eating vegetables. (‚òπÔ∏è)", opts: ["don't like", "doesn't like", "isn't like"], correct: 1, explain: "He doesn't like." },
    { q: "22. What ___ you like doing?", opts: ["do", "does", "are"], correct: 0, explain: "–í–æ–ø—Ä–æ—Å —Å you ‚Üí do." },
    { q: "23. My brother ___ meat. (üòçüòç)", opts: ["love", "loves", "loving"], correct: 1, explain: "My brother (he) loves." },
    { q: "24. I ___ to cook healthy food.", opts: ["want", "wants", "wanting"], correct: 0, explain: "–ü–æ—Å–ª–µ want ‚Üí –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤ (to cook), –Ω–µ -ing!" },
    { q: "25. Sam often ___ cakes to school.", opts: ["take", "takes", "taking"], correct: 1, explain: "Sam (he) takes (Present Simple)." }
];

let flashcardsEnabled = false;
let userAnswers = new Array(quizData.length).fill(null);

// ========== CORE FUNCTIONS ==========

function switchTab(id) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  
  document.getElementById(id).classList.add('active');
  // –ù–∞–π–¥–µ–º –∫–Ω–æ–ø–∫—É —Å –Ω—É–∂–Ω—ã–º onclick
  const activeBtn = Array.from(document.querySelectorAll('.tab')).find(b => b.getAttribute('onclick').includes(id));
  if(activeBtn) activeBtn.classList.add('active');

  const hud = document.getElementById('progress-hud');
  hud.style.display = (id === 'practice') ? 'flex' : 'none';
}

function speakWord(text) {
  // –û—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç –æ—Ç —ç–º–æ–¥–∑–∏ –¥–ª—è –æ–∑–≤—É—á–∫–∏
  const cleanText = text.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '').trim();
  
  window.speechSynthesis.cancel(); // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é —Ä–µ—á—å
  const utterance = new SpeechSynthesisUtterance(cleanText);
  utterance.lang = 'en-US';
  utterance.rate = 0.9;
  window.speechSynthesis.speak(utterance);
}

// ========== VOCABULARY RENDERER ==========

function toggleFlashcards() {
  flashcardsEnabled = !flashcardsEnabled;
  const btn = document.getElementById('flashcard-toggle');
  btn.innerText = flashcardsEnabled ? "üìã –†–µ–∂–∏–º —Å–ø–∏—Å–∫–∞" : "üîÑ –†–µ–∂–∏–º –∫–∞—Ä—Ç–æ—á–µ–∫";
  btn.classList.toggle('btn-primary');
  renderVocab();
}

function renderVocab() {
  const container = document.getElementById('vocab-container');
  container.innerHTML = '';

  if (!flashcardsEnabled) {
    // LIST MODE
    container.className = 'vocab-grid';
    
    vocabData.forEach(section => {
      const sectionDiv = document.createElement('div');
      sectionDiv.className = 'vocab-section';
      
      const title = document.createElement('h3');
      title.innerText = section.category;
      sectionDiv.appendChild(title);

      section.items.forEach(item => {
        const row = document.createElement('div');
        row.className = 'vocab-item';
        
        // English part with Audio
        const enSpan = document.createElement('div');
        enSpan.className = 'vocab-en';
        enSpan.innerHTML = `<span>${item.en}</span> <span class="speaker-icon">üîä</span>`;
        enSpan.onclick = () => speakWord(item.clean || item.en);
        
        // Russian part
        const ruSpan = document.createElement('span');
        ruSpan.className = 'vocab-ru';
        ruSpan.innerText = item.ru;

        row.appendChild(enSpan);
        row.appendChild(ruSpan);
        sectionDiv.appendChild(row);
      });
      container.appendChild(sectionDiv);
    });

  } else {
    // FLASHCARD MODE
    container.className = 'flashcard-grid';
    
    // Flatten all items into one list for cards
    const allItems = [];
    vocabData.forEach(s => allItems.push(...s.items));

    allItems.forEach(item => {
      const cardWrap = document.createElement('div');
      cardWrap.className = 'flashcard-container';
      cardWrap.onclick = function() { this.classList.toggle('flipped'); };

      const card = document.createElement('div');
      card.className = 'flashcard';

      const front = document.createElement('div');
      front.className = 'flashcard-front';
      front.innerHTML = `<div>${item.en}</div><div style="font-size:0.8rem; margin-top:10px; color:#aaa;">(click to flip)</div>`;
      // Stop propagation for audio button on card
      const audioBtn = document.createElement('div');
      audioBtn.innerHTML = 'üîä';
      audioBtn.className = 'speaker-icon';
      audioBtn.style.marginTop = '10px';
      audioBtn.onclick = (e) => { e.stopPropagation(); speakWord(item.clean || item.en); };
      front.appendChild(audioBtn);

      const back = document.createElement('div');
      back.className = 'flashcard-back';
      back.innerText = item.ru;

      card.appendChild(front);
      card.appendChild(back);
      cardWrap.appendChild(card);
      container.appendChild(cardWrap);
    });
  }
}

// ========== TEXT HIGHLIGHTS LOGIC ==========
function initHighlights() {
  document.querySelectorAll('.highlight').forEach(el => {
    const ru = el.getAttribute('data-ru');
    const en = el.textContent;
    
    // –°–æ–∑–¥–∞–µ–º Tooltip
    const tip = document.createElement('span');
    tip.className = 'tooltip';
    tip.innerText = ru;
    el.appendChild(tip);

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∏–∫ –¥–ª—è –æ–∑–≤—É—á–∫–∏
    el.addEventListener('click', () => speakWord(en));
  });
  
  // Phrases audio
  document.querySelectorAll('.phrase-item').forEach(el => {
    const text = el.querySelector('strong').innerText;
    el.style.cursor = 'pointer';
    el.addEventListener('click', () => speakWord(text));
  });
}

// ========== QUIZ LOGIC ==========

function renderQuiz() {
    const container = document.getElementById('quiz-container');
    container.innerHTML = '';

    quizData.forEach((item, idx) => {
      const card = document.createElement('div');
      card.className = 'quiz-item';

      const title = document.createElement('div');
      title.className = 'quiz-q';
      title.innerText = item.q;
      card.appendChild(title);

      const grid = document.createElement('div');
      grid.className = 'options';

      item.opts.forEach((optText, optIdx) => {
        const btn = document.createElement('button');
        btn.className = 'opt-btn';
        btn.innerText = optText;

        if(userAnswers[idx] !== null) {
          btn.disabled = true;
          if(optIdx === item.correct) btn.classList.add('correct');
          else if(optIdx === userAnswers[idx] && userAnswers[idx] !== item.correct) btn.classList.add('wrong');
          else btn.style.opacity = '0.5';
        } else {
          btn.onclick = () => handleAnswer(idx, optIdx);
        }
        grid.appendChild(btn);
      });

      card.appendChild(grid);
      if(userAnswers[idx] !== null) {
        const fb = document.createElement('div');
        fb.className = 'feedback';
        fb.style.marginTop = "10px";
        fb.style.fontWeight = "bold";
        const isCorrect = userAnswers[idx] === item.correct;
        fb.innerHTML = isCorrect
          ? `<span style="color:var(--success)">‚úÖ Correct!</span>`
          : `<span style="color:var(--error)">‚ùå Wrong.</span> <small style="color:#555; display:block; margin-top:5px;">${item.explain}</small>`;
        card.appendChild(fb);
      }
      container.appendChild(card);
    });

    updateScore();
}

function handleAnswer(qIdx, optIdx) {
    userAnswers[qIdx] = optIdx;
    renderQuiz();
}

function updateScore() {
    let correct = 0;
    let answered = 0;
    userAnswers.forEach((ans, i) => {
      if(ans !== null) {
        answered++;
        if(ans === quizData[i].correct) correct++;
      }
    });
    const total = quizData.length;
    const pct = (correct / total) * 100;

    document.getElementById('p-bar').style.width = pct + '%';
    document.getElementById('score-display').innerText = correct + ' / ' + total;
}

function resetPractice() {
    userAnswers = new Array(quizData.length).fill(null);
    renderQuiz();
    document.getElementById('p-bar').style.width = '0%';
    document.getElementById('score-display').innerText = '0 / ' + quizData.length;
}

// ========== INIT ==========
document.addEventListener('DOMContentLoaded', () => {
  initHighlights();
  renderVocab();
  renderQuiz();
});

</script>

</body>
</html>