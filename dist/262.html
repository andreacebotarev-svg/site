<!DOCTYPE html>
<html lang="en">
<head>
<meta name="referrer" content="no-referrer">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules & Behaviour: Generations - Interactive Lesson</title>
    <style>
        :root {
            /* –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ —Å —Ñ–æ—Ç–æ: –ö—Ä–∞—Å–Ω—ã–π, –ì–æ–ª—É–±–æ–π, –ë–µ–∂–µ–≤—ã–π, –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π */
            --primary-red: #D32F2F;      /* –ö—Ä–∞—Å–Ω—ã–π –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
            --accent-blue: #2196F3;      /* –ì–æ–ª—É–±–æ–π —Ü–≤–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–π */
            --bg-beige: #FDFBF7;         /* –¶–≤–µ—Ç –±—É–º–∞–≥–∏ */
            --text-dark: #333333;        /* –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç */
            --text-light: #666666;       /* –í—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç */
            --success-green: #4CAF50;
            --error-red: #F44336;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-beige);
            color: var(--text-dark);
            line-height: 1.6;
            padding-bottom: 40px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER STYLE */
        header {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            border-left: 6px solid var(--primary-red);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-text h1 {
            font-size: 2rem;
            color: var(--primary-red);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .header-text p {
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .header-badge {
            background: var(--accent-blue);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* NAVIGATION TABS */
        .nav-container {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-bottom: 25px;
            padding-bottom: 5px;
            scrollbar-width: none; /* Firefox */
        }
        
        .nav-container::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }

        .nav-tab {
            flex: 1;
            min-width: 140px;
            padding: 14px 20px;
            background: white;
            border: 2px solid transparent;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: #f5f5f5;
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--primary-red);
            color: white;
            box-shadow: 0 4px 10px rgba(211, 47, 47, 0.3);
        }

        /* CONTENT AREA */
        .tab-content {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            animation: fadeIn 0.4s ease-out;
            min-height: 400px;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Titles */
        h2.section-title {
            color: var(--text-dark);
            font-size: 1.8rem;
            margin-bottom: 25px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        h2.section-title span {
            color: var(--accent-blue);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-text h1 { font-size: 1.5rem; }
            .tab-content { padding: 20px; }
            .nav-tab { min-width: 120px; padding: 10px 15px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="header-text">
            <h1>Rules & Behaviour</h1>
            <p>Listening, Speaking & Grammar Focus</p>
        </div>
        <div class="header-badge">Unit: Generations</div>
    </header>

    <!-- Navigation -->
    <div class="nav-container">
        <button class="nav-tab active" data-tab="reading">üìñ Stories</button>
        <button class="nav-tab" data-tab="grammar">‚úèÔ∏è Grammar</button>
        <button class="nav-tab" data-tab="vocabulary">üí¨ Vocabulary</button>
        <button class="nav-tab" data-tab="practice">‚ö° Practice</button>
    </div>

    <!-- Content Wrapper -->
    <div id="content-wrapper">
        <!-- STORIES TAB -->
        <div id="reading" class="tab-content active">
            <h2 class="section-title">Family Rules: <span>Then & Now</span></h2>
            
            <style>
                .story-grid {
                    display: grid;
                    grid-template-columns: 2fr 1fr;
                    gap: 30px;
                }
                
                .story-text p {
                    margin-bottom: 15px;
                    font-size: 1.05rem;
                    text-align: justify;
                }

                .highlight {
                    background-color: #E3F2FD;
                    border-bottom: 2px solid var(--accent-blue);
                    cursor: pointer;
                    padding: 0 4px;
                    transition: background 0.2s;
                    position: relative;
                    font-weight: 500;
                }

                .highlight:hover {
                    background-color: #BBDEFB;
                }

                /* Tooltip style */
                .highlight::after {
                    content: attr(data-trans);
                    position: absolute;
                    bottom: 120%;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #333;
                    color: #fff;
                    padding: 5px 10px;
                    border-radius: 5px;
                    font-size: 0.85rem;
                    white-space: nowrap;
                    opacity: 0;
                    pointer-events: none;
                    transition: opacity 0.2s;
                    z-index: 100;
                }

                .highlight:hover::after {
                    opacity: 1;
                }

                .character-card {
                    background: #FFF3E0;
                    border: 1px solid #FFE0B2;
                    padding: 20px;
                    border-radius: 10px;
                    margin-bottom: 20px;
                }

                .character-card h3 {
                    color: #EF6C00;
                    margin-bottom: 10px;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .check-box {
                    margin-top: 40px;
                    background: #f9f9f9;
                    border-radius: 10px;
                    padding: 25px;
                    border: 2px solid #eee;
                }

                .check-item {
                    background: white;
                    padding: 15px;
                    margin-bottom: 10px;
                    border-radius: 8px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }

                .check-options {
                    display: flex;
                    gap: 10px;
                }

                .check-btn {
                    flex: 1;
                    padding: 8px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 5px;
                    cursor: pointer;
                    transition: all 0.2s;
                }

                .check-btn:hover { background: #f5f5f5; }
                .check-btn.selected-true { background: #E8F5E9; border-color: #4CAF50; color: #2E7D32; }
                .check-btn.selected-false { background: #FFEBEE; border-color: #F44336; color: #C62828; }

                @media(max-width: 768px) {
                    .story-grid { grid-template-columns: 1fr; }
                }
            </style>

            <div class="story-grid">
                <div class="story-text">
                    <p><strong>Katie:</strong> "My mum and dad are pretty <span class="highlight" data-trans="–Ω–µ—Å—Ç—Ä–æ–≥–∏–µ/—Å–≤–æ–±–æ–¥–æ–ª—é–±–∏–≤—ã–µ" onclick="speak('easy-going')">easy-going</span> with me I suppose ... I can go where I like, really. Some of my friends seem to have less freedom than I do. The only thing my mum says is that I keep my mobile with me at all times. I try to <span class="highlight" data-trans="–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ" onclick="speak('text')">text</span> her so she knows everything‚Äôs okay but sometimes I forget. My mum‚Äôs pretty cool about what time I get in and things like that but she is strict about one thing, homework. I always have to do it and when I come home from school, even if I‚Äôm really tired and I just want to do <span class="highlight" data-trans="–Ω–∏—á–µ–≥–æ" onclick="speak('nothing')">nothing</span>. Once, I got really bad marks in my exams and she got really angry and said I couldn‚Äôt go out at the weekend ... but then, after a while, she forgot, luckily!"</p>
                    
                    <p><strong>Sally:</strong> "While I was growing up, my parents tried to <span class="highlight" data-trans="–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å" onclick="speak('control')">control</span> every part of my life ‚Äì they had to know who my friends were and I wasn‚Äôt allowed to stay out after a certain time. I wasn‚Äôt allowed to watch certain television programmes. Because of these things, I felt very unhappy. Being a parent is difficult, I know, but if you‚Äôre too strict with your children ‚Äì especially teenagers ‚Äì they just <span class="highlight" data-trans="–±—É–Ω—Ç—É—é—Ç" onclick="speak('rebel')">rebel</span>. When I left home, I didn‚Äôt know what to do with my freedom and I went really wild for a while. It‚Äôs important to <span class="highlight" data-trans="–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å" onclick="speak('guide')">guide</span> your kids but not to control them. You have to remember that they‚Äôre individuals and they‚Äôre different from you. That‚Äôs what I think, anyway."</p>
                    
                    <p><strong>Ivy:</strong> "Sometimes I think Sally gives the children too much freedom and I try not to say anything. Katie seems to do what she wants ... still, she‚Äôs a lovely girl. Perhaps I was too strict with Sally when she was growing up but then my parents were very strict with me ... especially with us girls. I had three sisters. The women did all the work in the house ‚Äì we girls all had to help mother with the <span class="highlight" data-trans="–¥–æ–º–∞—à–Ω–∏–µ –¥–µ–ª–∞" onclick="speak('housework')">housework</span>. My brothers didn‚Äôt have to do anything, not even the <span class="highlight" data-trans="–º—ã—Ç—å—ë –ø–æ—Å—É–¥—ã" onclick="speak('washing-up')">washing-up</span> ... that‚Äôs how it was. And if mother didn‚Äôt like something we were wearing, that was it, we couldn‚Äôt wear it ... and we weren‚Äôt allowed to <span class="highlight" data-trans="—Å–ø–æ—Ä–∏—Ç—å" onclick="speak('argue')">argue</span> with her! We weren‚Äôt allowed to wear make-up or some of the things they wear these days! I remember after I was sixteen, I was allowed to wear a little bit of lipstick but that was all. I was <span class="highlight" data-trans="–∏—Å–ø—É–≥–∞–Ω–∞" onclick="speak('frightened')">frightened</span> of my mother so I did what she said! But in other ways we had more freedom ‚Äì we were allowed to play out in the streets, for instance, even when we were small, because it was safe then, not like nowadays. And we could walk around after dark, no one worried about it!"</p>
                </div>

                <div class="sidebar">
                    <div class="character-card">
                        <h3>üëµ Ivy</h3>
                        <p><strong>Era:</strong> 1940s-50s</p>
                        <p><strong>Rules:</strong> Very Strict</p>
                        <p><strong>Quote:</strong> "We weren't allowed to wear make-up."</p>
                    </div>
                    <div class="character-card" style="background: #E3F2FD; border-color: #BBDEFB;">
                        <h3>üë© Sally</h3>
                        <p><strong>Era:</strong> 1970s</p>
                        <p><strong>Rules:</strong> Moderate</p>
                        <p><strong>Quote:</strong> "I think I was a teenager in the 70s."</p>
                    </div>
                    <div class="character-card" style="background: #E8F5E9; border-color: #C8E6C9;">
                        <h3>üëß Katie</h3>
                        <p><strong>Era:</strong> 2000s</p>
                        <p><strong>Rules:</strong> Relaxed</p>
                        <p><strong>Quote:</strong> "I can go where I like."</p>
                    </div>
                </div>
            </div>

            <!-- Integrated Comprehension Check (True/False from Exercise 4) -->
            <div class="check-box">
                <h3 style="margin-bottom: 15px; color: var(--primary-red);">‚úÖ Comprehension Check</h3>
                
                <!-- Q1 -->
                <div class="check-item">
                    <p>1. Katie's parents are strict about everything.</p>
                    <div class="check-options">
                        <button class="check-btn" onclick="checkStory(this, false, 'False. She says they are easy-going.')">True</button>
                        <button class="check-btn" onclick="checkStory(this, true, 'Correct! They are easy-going.')">False</button>
                    </div>
                    <div class="feedback" style="display:none; margin-top:5px; font-size:0.9rem; font-weight:bold;"></div>
                </div>

                <!-- Q2 -->
                <div class="check-item">
                    <p>2. Sally's parents were very easy-going.</p>
                    <div class="check-options">
                        <button class="check-btn" onclick="checkStory(this, false, 'False. Her brothers didn\'t have to do washing up, but she had rules.')">True</button>
                        <button class="check-btn" onclick="checkStory(this, true, 'Correct! Ivy (her mum) was quite strict.')">False</button>
                    </div>
                    <div class="feedback" style="display:none; margin-top:5px; font-size:0.9rem; font-weight:bold;"></div>
                </div>

                <!-- Q3 -->
                <div class="check-item">
                    <p>3. Ivy didn't have any freedom about things like clothes.</p>
                    <div class="check-options">
                        <button class="check-btn" onclick="checkStory(this, true, 'Correct! She couldn\'t wear clothes if her mother didn\'t like them.')">True</button>
                        <button class="check-btn" onclick="checkStory(this, false, 'Incorrect. Read Ivy\'s text again.')">False</button>
                    </div>
                    <div class="feedback" style="display:none; margin-top:5px; font-size:0.9rem; font-weight:bold;"></div>
                </div>
            </div>
        </div>
        <!-- GRAMMAR TAB -->
        <div id="grammar" class="tab-content">
            <h2 class="section-title">Grammar Focus: <span>The Past</span></h2>
            <p style="margin-bottom: 20px; color: #666;">Obligation and Permission (had to, could, was allowed to)</p>

            <style>
                .grammar-container {
                    display: grid;
                    gap: 20px;
                }

                .grammar-card {
                    background: white;
                    border-left: 5px solid var(--accent-blue);
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    border-radius: 8px;
                    padding: 20px;
                    transition: transform 0.2s;
                }

                .grammar-card:hover {
                    transform: translateX(5px);
                }

                .grammar-card h3 {
                    color: var(--text-dark);
                    margin-bottom: 10px;
                    font-size: 1.2rem;
                }

                .grammar-rule {
                    font-weight: 600;
                    color: var(--primary-red);
                    margin-bottom: 8px;
                    display: block;
                }

                .example-box {
                    background: #F5F5F5;
                    padding: 12px;
                    border-radius: 6px;
                    margin-top: 10px;
                    font-style: italic;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .example-box:hover {
                    background: #E3F2FD;
                    color: #1565C0;
                }

                .practice-sentence {
                    margin-top: 30px;
                    background: #FFF8E1;
                    padding: 20px;
                    border-radius: 10px;
                    border: 1px solid #FFECB3;
                }

                .drop-zone {
                    display: inline-block;
                    min-width: 100px;
                    border-bottom: 2px dashed #aaa;
                    text-align: center;
                    margin: 0 5px;
                    color: var(--accent-blue);
                    font-weight: bold;
                }
            </style>

            <div class="grammar-container">
                <!-- Rule 1: Necessity/Obligation -->
                <div class="grammar-card">
                    <h3>üîí Necessity (Obligation)</h3>
                    <span class="grammar-rule">Present: have to ‚Üí Past: HAD TO</span>
                    <p>Use this when there was a rule and you had no choice.</p>
                    
                    <div class="example-box" onclick="speak('All the girls had to help my mother with the housework.')">
                        üîä "All the girls <b>had to</b> help my mother."
                    </div>
                    <div class="example-box" onclick="speak('I had to wear school uniform.')">
                        üîä "I <b>had to</b> wear school uniform."
                    </div>
                </div>

                <!-- Rule 2: No Necessity -->
                <div class="grammar-card" style="border-left-color: #4CAF50;">
                    <h3>üîì No Necessity</h3>
                    <span class="grammar-rule" style="color: #2E7D32;">Present: don't have to ‚Üí Past: DIDN'T HAVE TO</span>
                    <p>Use this when it wasn't necessary to do something.</p>
                    
                    <div class="example-box" onclick="speak('My brothers didn\'t have to do the washing-up.')">
                        üîä "My brothers <b>didn't have to</b> do the washing-up."
                    </div>
                </div>

                <!-- Rule 3: Permission -->
                <div class="grammar-card" style="border-left-color: #FF9800;">
                    <h3>‚úÖ Permission</h3>
                    <span class="grammar-rule" style="color: #EF6C00;">Present: can / allowed to ‚Üí Past: COULD / WAS ALLOWED TO</span>
                    <p>Use this when you had permission to do something.</p>
                    
                    <div class="example-box" onclick="speak('We could walk around after dark.')">
                        üîä "We <b>could</b> walk around after dark."
                    </div>
                    <div class="example-box" onclick="speak('I was allowed to wear a little bit of lipstick.')">
                        üîä "I <b>was allowed to</b> wear a little bit of lipstick."
                    </div>
                </div>

                <!-- Rule 4: Prohibition -->
                <div class="grammar-card" style="border-left-color: #F44336;">
                    <h3>üö´ Prohibition</h3>
                    <span class="grammar-rule" style="color: #C62828;">Present: can't / not allowed to ‚Üí Past: COULDN'T / WASN'T ALLOWED TO</span>
                    <p>Use this when something was forbidden.</p>
                    
                    <div class="example-box" onclick="speak('I couldn\'t wear clothes if my mother didn\'t like them.')">
                        üîä "I <b>couldn't</b> wear clothes if my mother didn't like them."
                    </div>
                    <div class="example-box" onclick="speak('We weren\'t allowed to wear make-up.')">
                        üîä "We <b>weren't allowed to</b> wear make-up."
                    </div>
                </div>
            </div>

            <!-- Mini Interactive Practice -->
            <div class="practice-sentence">
                <h3>üõ†Ô∏è Quick Check: Complete the sentence</h3>
                <p style="margin: 10px 0;">Ivy's story: "I <select id="gram-select-1" style="padding:5px; font-size:1rem;"><option>...</option><option value="correct">had to</option><option>could</option></select> help with the housework."</p>
                <p style="margin: 10px 0;">Sally's story: "I <select id="gram-select-2" style="padding:5px; font-size:1rem;"><option>...</option><option>had to</option><option value="correct">was allowed to</option></select> wear lipstick after 16."</p>
                
                <button onclick="checkGrammarQuick()" style="margin-top:10px; padding:8px 16px; background:var(--accent-blue); color:white; border:none; border-radius:4px; cursor:pointer;">Check</button>
                <span id="gram-feedback" style="margin-left:10px; font-weight:bold;"></span>
            </div>
        </div>
	        <!-- VOCABULARY TAB -->
        <div id="vocabulary" class="tab-content">
            <h2 class="section-title">Vocabulary: <span>Make & Do</span></h2>
            <p style="margin-bottom: 20px;">Drag the phrases to the correct verb box!</p>

            <style>
                .drag-container {
                    display: flex;
                    justify-content: space-around;
                    flex-wrap: wrap;
                    gap: 20px;
                    margin-top: 30px;
                }

                .drop-box {
                    width: 45%;
                    min-height: 250px;
                    background: #f4f4f4;
                    border: 3px dashed #ccc;
                    border-radius: 15px;
                    padding: 20px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    transition: background 0.3s, border-color 0.3s;
                }

                .drop-box.highlight-drag {
                    background: #e8f5e9;
                    border-color: var(--success-green);
                }

                .drop-box h3 {
                    font-size: 2rem;
                    color: var(--text-light);
                    margin-bottom: 15px;
                    text-transform: uppercase;
                }

                .word-bank {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 10px;
                    justify-content: center;
                    margin-bottom: 30px;
                    min-height: 60px;
                }

                .draggable-item {
                    background: white;
                    padding: 10px 15px;
                    border-radius: 20px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                    cursor: grab;
                    font-weight: 600;
                    color: var(--text-dark);
                    border: 2px solid var(--accent-blue);
                    user-select: none;
                    transition: transform 0.1s;
                }

                .draggable-item:active {
                    cursor: grabbing;
                    transform: scale(0.95);
                }

                .draggable-item.correct-drop {
                    background: var(--success-green);
                    color: white;
                    border-color: var(--success-green);
                    cursor: default;
                }

                @media(max-width: 600px) {
                    .drop-box { width: 100%; }
                }
            </style>

            <!-- Items to Drag -->
            <div class="word-bank" id="word-bank">
                <div class="draggable-item" draggable="true" data-type="make" onclick="speak('make phone calls')">phone calls</div>
                <div class="draggable-item" draggable="true" data-type="do" onclick="speak('do housework')">housework</div>
                <div class="draggable-item" draggable="true" data-type="do" onclick="speak('do the washing-up')">the washing-up</div>
                <div class="draggable-item" draggable="true" data-type="do" onclick="speak('do the ironing')">the ironing</div>
                <div class="draggable-item" draggable="true" data-type="make" onclick="speak('make sandwiches')">sandwiches</div>
                <div class="draggable-item" draggable="true" data-type="make" onclick="speak('make a mess')">a mess</div>
                <div class="draggable-item" draggable="true" data-type="do" onclick="speak('do nothing')">nothing</div>
            </div>

            <!-- Drop Zones -->
            <div class="drag-container">
                <div class="drop-box" id="box-make" data-target="make">
                    <h3>MAKE</h3>
                    <!-- Dropped items appear here -->
                </div>
                <div class="drop-box" id="box-do" data-target="do">
                    <h3>DO</h3>
                    <!-- Dropped items appear here -->
                </div>
            </div>
        </div>

        <!-- PRACTICE TAB -->
        <div id="practice" class="tab-content">
            <h2 class="section-title">Practice Quiz ‚ö°</h2>
            
            <style>
                .quiz-wrapper {
                    max-width: 600px;
                    margin: 0 auto;
                }
                .q-card {
                    background: white;
                    border: 1px solid #eee;
                    border-radius: 8px;
                    padding: 20px;
                    margin-bottom: 15px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                }
                .q-text {
                    font-size: 1.1rem;
                    margin-bottom: 15px;
                    font-weight: 600;
                }
                .q-options button {
                    display: block;
                    width: 100%;
                    text-align: left;
                    padding: 10px 15px;
                    margin-bottom: 8px;
                    background: #f9f9f9;
                    border: 1px solid #ddd;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: 0.2s;
                }
                .q-options button:hover {
                    background: #f0f0f0;
                }
                .q-options button.correct {
                    background: #d4edda;
                    border-color: #28a745;
                    color: #155724;
                }
                .q-options button.wrong {
                    background: #f8d7da;
                    border-color: #dc3545;
                    color: #721c24;
                }
                .result-message {
                    margin-top: 10px;
                    font-weight: bold;
                    font-size: 0.9rem;
                }
            </style>

            <div class="quiz-wrapper">
                <!-- Q1 -->
                <div class="q-card">
                    <p class="q-text">1. When I was young, I _______ help with the housework.</p>
                    <div class="q-options">
                        <button onclick="checkQuiz(this, true)">had to</button>
                        <button onclick="checkQuiz(this, false)">have to</button>
                        <button onclick="checkQuiz(this, false)">was allowed to</button>
                    </div>
                    <div class="result-message"></div>
                </div>

                <!-- Q2 -->
                <div class="q-card">
                    <p class="q-text">2. My parents were easy-going. I _______ stay out late.</p>
                    <div class="q-options">
                        <button onclick="checkQuiz(this, false)">couldn't</button>
                        <button onclick="checkQuiz(this, true)">was allowed to</button>
                        <button onclick="checkQuiz(this, false)">had to</button>
                    </div>
                    <div class="result-message"></div>
                </div>

                <!-- Q3 -->
                <div class="q-card">
                    <p class="q-text">3. I hate doing the _______ .</p>
                    <div class="q-options">
                        <button onclick="checkQuiz(this, false)">mess</button>
                        <button onclick="checkQuiz(this, false)">sandwiches</button>
                        <button onclick="checkQuiz(this, true)">washing-up</button>
                    </div>
                    <div class="result-message"></div>
                </div>
            </div>
        </div>
    </div> <!-- end content-wrapper -->
</div> <!-- end container -->

<script>
    /* =============================
       NAVIGATION BETWEEN TABS
    ============================== */
    const navTabs = document.querySelectorAll('.nav-tab');
    const tabContents = document.querySelectorAll('.tab-content');

    navTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const targetId = tab.dataset.tab;

            navTabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));

            tab.classList.add('active');
            const target = document.getElementById(targetId);
            if (target) target.classList.add('active');
        });
    });

    /* =============================
       GOOGLE TTS SPEAK FUNCTION
       (–±–µ–∑ speechSynthesis)
    ============================== */
    let ttsAudio = null;

    function cleanTextForTTS(text) {
        if (!text) return "";
        // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π: —É–±—Ä–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–ª—É–∂–µ–±–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
        let clean = text.replace(/\[translate:|\]/gi, '');
        // –£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å—ã –∏ –¥–≤–æ–π–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã
        clean = clean.replace(/\s+/g, ' ').trim();
        return clean;
    }

    function speak(rawText) {
        const text = cleanTextForTTS(rawText);
        if (!text) return;

        const url =
            "https://translate.google.com/translate_tts?ie=UTF-8&q=  " +
            encodeURIComponent(text) +
            "&tl=en&client=tw-ob";

        try {
            if (ttsAudio) {
                ttsAudio.pause();
                ttsAudio = null;
            }
            ttsAudio = new Audio(url);
            ttsAudio.play().catch(err => {
                console.error("TTS play error:", err);
            });
        } catch (e) {
            console.error("TTS error:", e);
        }
    }

    /* =============================
       STORIES TAB ‚Äì TRUE/FALSE
    ============================== */
    function checkStory(button, isCorrect, message) {
        const item = button.closest('.check-item');
        const buttons = item.querySelectorAll('.check-btn');
        const feedback = item.querySelector('.feedback');

        // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–±–æ—Ä
        buttons.forEach(btn => {
            btn.disabled = true;
            btn.classList.remove('selected-true', 'selected-false');
        });

        if (isCorrect) {
            button.classList.add('selected-true');
            feedback.style.color = '#2E7D32';
        } else {
            button.classList.add('selected-false');
            feedback.style.color = '#C62828';
        }

        feedback.textContent = message;
        feedback.style.display = 'block';
    }

    /* =============================
       QUICK GRAMMAR CHECK
    ============================== */
    function checkGrammarQuick() {
        const s1 = document.getElementById('gram-select-1');
        const s2 = document.getElementById('gram-select-2');
        const fb = document.getElementById('gram-feedback');

        let correct = 0;
        if (s1.value === 'correct') correct++;
        if (s2.value === 'correct') correct++;

        if (correct === 2) {
            fb.textContent = 'Great! Both answers are correct.';
            fb.style.color = '#2E7D32';
        } else if (correct === 1) {
            fb.textContent = 'Almost there. One answer is correct.';
            fb.style.color = '#FF9800';
        } else {
            fb.textContent = 'Check the grammar rules again.';
            fb.style.color = '#C62828';
        }
    }

    /* =============================
       DRAG & DROP: MAKE / DO
    ============================== */
    const draggableItems = document.querySelectorAll('.draggable-item');
    const dropBoxes = document.querySelectorAll('.drop-box');
    const wordBank = document.getElementById('word-bank');

    draggableItems.forEach(item => {
        item.addEventListener('dragstart', dragStart);
        item.addEventListener('dragend', dragEnd);
    });

    dropBoxes.forEach(box => {
        box.addEventListener('dragover', dragOver);
        box.addEventListener('drop', handleDrop);
        box.addEventListener('dragleave', dragLeave);
    });

    // –†–∞–∑—Ä–µ—à–∞–µ–º –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–ª–æ–≤–æ –æ–±—Ä–∞—Ç–Ω–æ –≤ word-bank
    wordBank.addEventListener('dragover', dragOver);
    wordBank.addEventListener('drop', e => {
        e.preventDefault();
        const id = e.dataTransfer.getData('text/plain');
        const el = document.getElementById(id);
        if (el && !el.classList.contains('correct-drop')) {
            wordBank.appendChild(el);
        }
        dropBoxes.forEach(b => b.classList.remove('highlight-drag'));
    });

    function dragStart(e) {
        if (!this.id) {
            this.id = 'drag-' + Math.random().toString(16).slice(2);
        }
        e.dataTransfer.setData('text/plain', this.id);
        dropBoxes.forEach(b => b.classList.add('highlight-drag'));
    }

    function dragEnd() {
        dropBoxes.forEach(b => b.classList.remove('highlight-drag'));
    }

    function dragOver(e) {
        e.preventDefault();
    }

    function dragLeave() {
        // –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º, –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å–Ω–∏–º–∞–µ–º –≤ dragEnd / drop
    }

    function handleDrop(e) {
        e.preventDefault();
        const box = this;
        const targetType = box.dataset.target;
        const id = e.dataTransfer.getData('text/plain');
        const el = document.getElementById(id);
        if (!el) return;

        const itemType = el.dataset.type;

        if (itemType === targetType) {
            box.appendChild(el);
            el.classList.add('correct-drop');
            el.setAttribute('draggable', 'false');
        } else {
            // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–æ–∫—Å ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –±–∞–Ω–∫
            wordBank.appendChild(el);
        }
        dropBoxes.forEach(b => b.classList.remove('highlight-drag'));
    }

    /* =============================
       SIMPLE PRACTICE QUIZ
    ============================== */
    function checkQuiz(button, isCorrect) {
        const card = button.closest('.q-card');
        const buttons = card.querySelectorAll('.q-options button');
        const result = card.querySelector('.result-message');

        buttons.forEach(b => {
            b.disabled = true;
            b.classList.remove('correct', 'wrong');
        });

        if (isCorrect) {
            button.classList.add('correct');
            result.textContent = 'Correct!';
            result.style.color = '#2E7D32';
        } else {
            button.classList.add('wrong');
            result.textContent = 'Not quite. Check the sentence again.';
            result.style.color = '#C62828';
        }
    }

    /* =============================
       INSTANT TOUCH TRANSLATION (Improved)
    ============================== */
    
    // –ü—Ä–æ—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–ª–æ–≤
    const translationDict = {
        'easy-going': '–Ω–µ—Å—Ç—Ä–æ–≥–∏–µ / —Å–≤–æ–±–æ–¥–æ–ª—é–±–∏–≤—ã–µ',
        'text': '–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ',
        'nothing': '–Ω–∏—á–µ–≥–æ',
        'control': '–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å',
        'rebel': '–±—É–Ω—Ç—É—é—Ç',
        'guide': '–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å',
        'housework': '–¥–æ–º–∞—à–Ω–∏–µ –¥–µ–ª–∞',
        'washing-up': '–º—ã—Ç—å—ë –ø–æ—Å—É–¥—ã',
        'argue': '—Å–ø–æ—Ä–∏—Ç—å',
        'frightened': '–∏—Å–ø—É–≥–∞–Ω–∞',
        'freedom': '—Å–≤–æ–±–æ–¥–∞',
        'strict': '—Å—Ç—Ä–æ–≥–∏–π',
        'homework': '–¥–æ–º–∞—à–Ω—è—è —Ä–∞–±–æ—Ç–∞',
        'mobile': '–º–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω',
        'parents': '—Ä–æ–¥–∏—Ç–µ–ª–∏',
        'friends': '–¥—Ä—É–∑—å—è',
        'exams': '—ç–∫–∑–∞–º–µ–Ω—ã',
        'weekend': '–≤—ã—Ö–æ–¥–Ω—ã–µ',
        'television': '—Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏–µ',
        'unhappy': '–Ω–µ —Å—á–∞—Å—Ç–ª–∏–≤—ã–π',
        'wild': '–¥–∏–∫–æ / –±–µ–∑—É–¥–µ—Ä–∂–Ω–æ',
        'individuals': '–ª–∏—á–Ω–æ—Å—Ç–∏',
        'different': '—Ä–∞–∑–Ω—ã–µ',
        'girls': '–¥–µ–≤–æ—á–∫–∏',
        'boys': '–º–∞–ª—å—á–∏–∫–∏',
        'clothes': '–æ–¥–µ–∂–¥–∞',
        'make-up': '–º–∞–∫–∏—è–∂',
        'lipstick': '–ø–æ–º–∞–¥–∞',
        'streets': '—É–ª–∏—Ü—ã',
        'dark': '—Ç–µ–º–Ω–æ—Ç–∞',
        'worried': '–±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è'
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç—É–ª—Ç–∏–ø–∞
    function showTooltip(word, x, y) {
        let tooltip = document.getElementById('word-tooltip');
        if (!tooltip) {
            tooltip = document.createElement('div');
            tooltip.id = 'word-tooltip';
            tooltip.style.cssText = `
                position: absolute;
                background: #333;
                color: #fff;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 0.9rem;
                z-index: 1000;
                box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                pointer-events: none;
                animation: fadeIn 0.2s;
                max-width: 200px;
                word-wrap: break-word;
            `;
            document.body.appendChild(tooltip);
        }

        // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥ –∏–∑ —Å–ª–æ–≤–∞—Ä—è
        const translation = translationDict[word.toLowerCase()] || '–ù–µ –Ω–∞–π–¥–µ–Ω–æ';
        tooltip.innerHTML = `<strong>${word}</strong>: ${translation}`;
        
        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        tooltip.style.left = `${x}px`;
        tooltip.style.top = `${y}px`;
        
        // –°–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            tooltip.style.display = 'none';
        }, 3000);
    }

    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
    document.addEventListener('DOMContentLoaded', function() {
        // –ò—â–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª–∞—Å—Å–æ–º 'story-text' (—ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –∏—Å—Ç–æ—Ä–∏—è–º–∏)
        const storyContainers = document.querySelectorAll('.story-text');
        
        storyContainers.forEach(container => {
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –Ω–∞–≤–µ–¥–µ–Ω–∏—è (–¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞)
            container.addEventListener('mouseover', function(e) {
                if (e.target.tagName === 'SPAN' && e.target.classList.contains('highlight')) {
                    // –ï—Å–ª–∏ —ç—Ç–æ —É–∂–µ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º (—á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å)
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–ª–æ–≤–∞
                const word = e.target.textContent.trim();
                if (word && /^[a-zA-Z]+$/.test(word)) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç—É–ª—Ç–∏–ø
                    const rect = e.target.getBoundingClientRect();
                    showTooltip(word, rect.left + window.scrollX, rect.top + window.scrollY - 40);
                }
            });

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ long press (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
            let touchTimeout;
            container.addEventListener('touchstart', function(e) {
                const touch = e.touches[0];
                const target = e.target;
                
                if (target.tagName === 'SPAN' && target.classList.contains('highlight')) {
                    // –ï—Å–ª–∏ —ç—Ç–æ —É–∂–µ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
                    return;
                }
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –¥–ª—è long press
                touchTimeout = setTimeout(() => {
                    const word = target.textContent.trim();
                    if (word && /^[a-zA-Z]+$/.test(word)) {
                        const rect = target.getBoundingClientRect();
                        showTooltip(word, rect.left + window.scrollX, rect.top + window.scrollY - 40);
                    }
                }, 500); // 500 –º—Å –¥–ª—è long press
            });

            container.addEventListener('touchend', function(e) {
                clearTimeout(touchTimeout);
            });

            container.addEventListener('touchcancel', function(e) {
                clearTimeout(touchTimeout);
            });
        });
    });
</script>

</body>
</html>