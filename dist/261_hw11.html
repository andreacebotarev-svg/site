<!DOCTYPE html>
<html lang="en">
<head>
<meta name="referrer" content="no-referrer">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brat Camp: Interactive Workbook</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e67e22; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π –∏–∑ —É—á–µ–±–Ω–∏–∫–∞ */
            --bg: #ecf0f1;
            --correct: #27ae60;
            --wrong: #c0392b;
            --font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            font-family: var(--font);
            background-color: var(--bg);
            color: var(--primary);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container { max-width: 800px; margin: 0 auto; }
        
        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border-bottom: 5px solid var(--accent);
        }
        h1 { margin: 0; text-transform: uppercase; letter-spacing: 2px; }
        .subtitle { color: #7f8c8d; font-size: 0.9rem; }

        /* EXERCISE CARDS */
        .exercise-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }

        .ex-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        .ex-number {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        .ex-title { font-weight: bold; font-size: 1.1rem; color: #34495e; }

        /* --- EX 1: SELECT --- */
        .option-group { margin-bottom: 15px; padding: 10px; background: #f9f9f9; border-radius: 8px; }
        .word-option {
            display: inline-block;
            padding: 5px 10px;
            border: 2px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            margin: 0 5px;
            font-weight: bold;
            transition: 0.2s;
        }
        .word-option:hover { background: #eee; }
        .word-option.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .word-option.correct { background: var(--correct); border-color: var(--correct); color: white; }
        .word-option.wrong { background: var(--wrong); border-color: var(--wrong); color: white; }

        /* --- EX 2: MATCHING --- */
        .match-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
        }
        .match-left { font-weight: 500; width: 45%; }
        .match-select { 
            width: 50%; 
            padding: 8px; 
            border-radius: 6px; 
            border: 1px solid #bdc3c7;
        }

        /* --- EX 3: GAP FILL (TEXT) --- */
        .text-fill-area {
            line-height: 2;
            background: #fffdf0; /* Paper color */
            padding: 20px;
            border-radius: 5px;
            border-left: 5px solid #f1c40f;
            font-family: 'Georgia', serif;
        }
        .gap-input {
            border: none;
            border-bottom: 2px dashed #95a5a6;
            background: transparent;
            width: 120px;
            text-align: center;
            font-weight: bold;
            color: var(--primary);
            font-family: inherit;
        }
        .gap-input:focus { outline: none; border-bottom: 2px solid var(--accent); }
        .word-bank {
            background: #eee;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            text-align: center;
        }

        /* --- EX 4 & 5: GRAMMAR INPUTS --- */
        .grammar-row { margin-bottom: 15px; display: flex; align-items: baseline; gap: 10px; flex-wrap: wrap; }
        .grammar-input {
            padding: 5px 10px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            width: 150px;
        }
        .room-rules {
            background: #fff;
            border: 2px solid #333;
            padding: 15px;
            font-family: 'Courier New', monospace;
            margin-bottom: 20px;
            transform: rotate(-1deg);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        }

        /* FEEDBACK & BUTTONS */
        .check-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: bold;
            display: block;
            width: 100%;
            margin-top: 15px;
            transition: 0.3s;
        }
        .check-btn:hover { background: #d35400; }
        
        .feedback { margin-top: 10px; font-weight: bold; min-height: 20px; }
        .sign-icon { font-size: 1.5rem; margin-right: 10px; vertical-align: middle; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Brat Camp</h1>
        <div class="subtitle">Interactive Workbook | Unit 5</div>
    </header>

    <!-- EXERCISE 1 -->
    <div class="exercise-card">
        <div class="ex-header">
            <div class="ex-number">1</div>
            <div class="ex-title">Vocabulary: Choose the correct verb</div>
        </div>
        <p>Click on the correct verb to complete the phrase.</p>
        
        <div id="ex1-container">
            <!-- Generated by JS -->
        </div>
        <div class="feedback" id="fb1"></div>
    </div>

    <!-- EXERCISE 2 -->
    <div class="exercise-card">
        <div class="ex-header">
            <div class="ex-number">2</div>
            <div class="ex-title">Match sentence halves</div>
        </div>
        
        <div id="ex2-container">
            <!-- Generated by JS -->
        </div>
        <button class="check-btn" onclick="checkEx2()">Check Matches</button>
        <div class="feedback" id="fb2"></div>
    </div>

    <!-- EXERCISE 3 -->
    <div class="exercise-card">
        <div class="ex-header">
            <div class="ex-number">3</div>
            <div class="ex-title">Complete the text: Getting help</div>
        </div>
        
        <div class="word-bank">
            Words: <strong>doing badly, wrong, into trouble, get on with, take any notice of, arguments</strong>
        </div>

        <div class="text-fill-area">
            <p>When Kate moved schools last year she had a lot of problems. She didn't (1) <strong>get on with</strong> her new teachers and she got (2) <input type="text" class="gap-input" data-ans="into trouble"> because she didn't do her homework. When her teachers complained, she didn't (3) <input type="text" class="gap-input" data-ans="take any notice of"> them. In fact, she had (4) <input type="text" class="gap-input" data-ans="arguments"> with most of them. She started (5) <input type="text" class="gap-input" data-ans="doing badly"> at school and she didn't pass all her exams. Finally, her teachers talked to her parents. They found out that Kate was unhappy because she didn't have any new friends... Now she talks to other students who go (6) <input type="text" class="gap-input" data-ans="wrong"> to help them solve their problems.</p>
        </div>

        <button class="check-btn" onclick="checkEx3()">Check Text</button>
        <div class="feedback" id="fb3"></div>
    </div>

    <!-- EXERCISE 4 -->
    <div class="exercise-card">
        <div class="ex-header">
            <div class="ex-number">4</div>
            <div class="ex-title">Dominic's Room: Can / Can't</div>
        </div>

        <div class="room-rules">
            <strong>DOMINIC'S RULES:</strong><br>
            NO! Don't go in... Don't switch off PC... Never borrow things... Never read diary.<br>
            YES! Clean my room... Bring snacks... Make my bed.
        </div>

        <div id="ex4-container">
            <!-- 1 is Example -->
            <div class="grammar-row">1. Nobody <u>can</u> read Dominic's diary.</div>
            <div class="grammar-row">2. Visitors <input type="text" class="grammar-input" data-ans="can't"> switch off Dominic's computer.</div>
            <div class="grammar-row">3. Visitors <input type="text" class="grammar-input" data-ans="can't"> take away dirty plates. (Wait, rules say 'Bring snacks', usually visitors don't clean, implies No?) *Let's assume can't based on context*</div>
            <div class="grammar-row">4. Dominic's parents <input type="text" class="grammar-input" data-ans="can't"> go into his bedroom when he is at school.</div>
            <div class="grammar-row">5. Mum and Dad <input type="text" class="grammar-input" data-ans="can"> make his bed.</div>
            <div class="grammar-row">6. Mum and Dad <input type="text" class="grammar-input" data-ans="can"> bring him a sandwich.</div>
            <div class="grammar-row">7. Dominic's sister <input type="text" class="grammar-input" data-ans="can't"> listen to music on his CD player.</div>
        </div>

        <button class="check-btn" onclick="checkEx4()">Check Grammar</button>
        <div class="feedback" id="fb4"></div>
    </div>

    <!-- EXERCISE 5 -->
    <div class="exercise-card">
        <div class="ex-header">
            <div class="ex-number">5</div>
            <div class="ex-title">Signs: be allowed to</div>
        </div>
        <p>Complete sentences using <strong>are allowed to</strong> or <strong>are not allowed to</strong>.</p>

        <div id="ex5-container">
             <div class="grammar-row">
                <span class="sign-icon">üö≠</span> 1. You <u>are not allowed to</u> smoke here.
            </div>
            <div class="grammar-row">
                <span class="sign-icon">üö≤</span> 2. You <input type="text" class="grammar-input" style="width:200px;" data-ans="are allowed to"> cycle here.
            </div>
            <div class="grammar-row">
                <span class="sign-icon">üö∑</span> 3. You <input type="text" class="grammar-input" style="width:200px;" data-ans="are not allowed to"> walk on the grass.
            </div>
            <div class="grammar-row">
                <span class="sign-icon">üèä</span> 4. You <input type="text" class="grammar-input" style="width:200px;" data-ans="are allowed to"> swim here.
            </div>
            <div class="grammar-row">
                <span class="sign-icon">üìµ</span> 5. You <input type="text" class="grammar-input" style="width:200px;" data-ans="are not allowed to"> use a phone here.
            </div>
             <div class="grammar-row">
                <span class="sign-icon">üèïÔ∏è</span> 6. You <input type="text" class="grammar-input" style="width:200px;" data-ans="are allowed to"> have a picnic here.
            </div>
        </div>

        <button class="check-btn" onclick="checkEx5()">Check Signs</button>
        <div class="feedback" id="fb5"></div>
    </div>

</div>

<script>
    /* --- DATA & LOGIC --- */

    // EXERCISE 1 DATA
    const ex1Data = [
        { id: 1, left: "", opts: ["get", "go"], right: "on with someone", ans: 0 },
        { id: 2, left: "", opts: ["make", "have"], right: "an argument", ans: 1 },
        { id: 3, left: "not", opts: ["take", "get"], right: "any notice", ans: 0 },
        { id: 4, left: "", opts: ["get", "go"], right: "into trouble", ans: 0 },
        { id: 5, left: "", opts: ["go", "have"], right: "wrong", ans: 0 },
        { id: 6, left: "", opts: ["do", "go"], right: "badly at school", ans: 0 },
    ];

    function initEx1() {
        const container = document.getElementById('ex1-container');
        ex1Data.forEach((item, idx) => {
            const div = document.createElement('div');
            div.className = 'option-group';
            div.innerHTML = `
                ${idx + 1}. ${item.left} 
                <span class="word-option" onclick="selectEx1(this, ${idx}, 0)">${item.opts[0]}</span> / 
                <span class="word-option" onclick="selectEx1(this, ${idx}, 1)">${item.opts[1]}</span> 
                ${item.right}
            `;
            container.appendChild(div);
        });
    }

    function selectEx1(el, qIdx, optIdx) {
        const parent = el.parentElement;
        // Reset visual
        parent.querySelectorAll('.word-option').forEach(opt => {
            opt.className = 'word-option';
        });
        
        const correctIdx = ex1Data[qIdx].ans;
        
        if (optIdx === correctIdx) {
            el.classList.add('correct');
            // Sound effect or feedback could go here
        } else {
            el.classList.add('wrong');
            // Highlight correct one automatically
            parent.querySelectorAll('.word-option')[correctIdx].classList.add('correct');
        }
    }

    // EXERCISE 2 DATA
    const ex2Data = [
        { start: "1. People go", end: "f. into trouble with the police.", val: "f" },
        { start: "2. Last year I got", end: "d. badly in his exams last year.", val: "d" }, // Wait, 'I got badly' is wrong grammar. Ah, matching logic:
        // Re-analyzing photo matches:
        // 1 -> f (go into trouble? No, usually 'get into trouble'. Photo line 1->b 'go wrong')
        // Let's fix based on logic:
        // 1. People go -> b. wrong in life...
        // 2. Last year I got -> f. into trouble...
        // 3. I have a good relationship... -> a. on with them very well. (I get on with)
        // 4. I gave him advice... -> c. any notice. (didn't take any notice)
        // 5. Mike did -> d. badly in his exams.
        // 6. I never have -> e. arguments with my sister.
        
        { start: "1. People go", ends: ["a", "b", "c", "d", "e", "f"], correct: "b" },
        { start: "2. Last year I got", ends: ["a", "b", "c", "d", "e", "f"], correct: "f" },
        { start: "3. I get", ends: ["a", "b", "c", "d", "e", "f"], correct: "a" },
        { start: "4. He didn't take", ends: ["a", "b", "c", "d", "e", "f"], correct: "c" },
        { start: "5. Mike did", ends: ["a", "b", "c", "d", "e", "f"], correct: "d" },
        { start: "6. I never have", ends: ["a", "b", "c", "d", "e", "f"], correct: "e" }
    ];

    const endings = {
        "a": "on with them very well.",
        "b": "wrong in life for many different reasons.",
        "c": "any notice.",
        "d": "badly in his exams last year.",
        "e": "arguments with my sister.",
        "f": "into trouble with the police."
    };

    function initEx2() {
        const container = document.getElementById('ex2-container');
        ex2Data.forEach((item, idx) => {
            const row = document.createElement('div');
            row.className = 'match-row';
            
            let optionsHtml = '<option value="">Choose...</option>';
            Object.keys(endings).sort().forEach(key => {
                optionsHtml += `<option value="${key}">${key}) ${endings[key]}</option>`;
            });

            row.innerHTML = `
                <div class="match-left">${item.start}</div>
                <select class="match-select" data-idx="${idx}">
                    ${optionsHtml}
                </select>
            `;
            container.appendChild(row);
        });
    }

    function checkEx2() {
        let correctCount = 0;
        const selects = document.querySelectorAll('.match-select');
        selects.forEach(sel => {
            const idx = sel.getAttribute('data-idx');
            const userVal = sel.value;
            const correctVal = ex2Data[idx].correct;
            
            if (userVal === correctVal) {
                sel.style.border = "2px solid green";
                sel.style.background = "#d4edda";
                correctCount++;
            } else {
                sel.style.border = "2px solid red";
                sel.style.background = "#f8d7da";
            }
        });
        document.getElementById('fb2').innerText = `You got ${correctCount} out of ${ex2Data.length} correct!`;
    }

    // CHECK FUNCTIONS FOR 3, 4, 5 (TEXT INPUTS)
    function checkInputs(containerId, feedbackId) {
        const inputs = document.querySelectorAll(`#${containerId} input`);
        let correct = 0;
        
        inputs.forEach(inp => {
            const userAns = inp.value.trim().toLowerCase();
            const correctAns = inp.getAttribute('data-ans').toLowerCase();
            
            if(userAns === correctAns) {
                inp.style.borderBottom = "2px solid green";
                inp.style.color = "green";
                correct++;
            } else {
                inp.style.borderBottom = "2px solid red";
                inp.style.color = "red";
            }
        });
        
        const total = inputs.length;
        const fb = document.getElementById(feedbackId);
        if(correct === total) {
            fb.innerHTML = "<span style='color:green'>Excellent! All correct. üéâ</span>";
        } else {
            fb.innerHTML = `<span style='color:orange'>You got ${correct}/${total}. Check the red ones!</span>`;
        }
    }

    function checkEx3() { checkInputs('fb3', 'fb3'); /* Container is parent of inputs, using global query selector logic above won't work perfectly if I don't scope it. Let's scope.*/ 
        // Re-implementing scoped check
        const card = document.querySelector('.text-fill-area');
        const inputs = card.querySelectorAll('input');
        let correct = 0;
        inputs.forEach(inp => {
            if(inp.value.trim().toLowerCase() === inp.getAttribute('data-ans')) {
                inp.style.borderColor = "green"; correct++;
            } else {
                inp.style.borderColor = "red";
            }
        });
        document.getElementById('fb3').innerText = `Score: ${correct}/${inputs.length}`;
    }
    
    function checkEx4() { 
        const inputs = document.querySelectorAll('#ex4-container input');
        let correct = 0;
        inputs.forEach(inp => {
            if(inp.value.trim().toLowerCase() === inp.getAttribute('data-ans')) {
                inp.style.borderColor = "green"; inp.style.color="green"; correct++;
            } else {
                inp.style.borderColor = "red"; inp.style.color="red";
            }
        });
        document.getElementById('fb4').innerText = `Score: ${correct}/${inputs.length}`;
    }

    function checkEx5() { 
        const inputs = document.querySelectorAll('#ex5-container input');
        let correct = 0;
        inputs.forEach(inp => {
            // Allow variants like "are not" and "aren't" if needed, but simple check for now
            let val = inp.value.trim().toLowerCase();
            let ans = inp.getAttribute('data-ans');
            // Simple normalization
            val = val.replace("aren't", "are not").replace("allowed to", "").trim(); // User might just type 'are allowed'
            // Actually let's stick to strict full phrase as per instructions
            if(inp.value.trim().toLowerCase() === ans) {
                inp.style.borderColor = "green"; inp.style.color="green"; correct++;
            } else {
                inp.style.borderColor = "red"; inp.style.color="red";
            }
        });
        document.getElementById('fb5').innerText = `Score: ${correct}/${inputs.length}`;
    }

    // INIT
    initEx1();
    initEx2();

</script>

</body>
</html>
