<!DOCTYPE html>
<html lang="ru">
<head>
<meta name="referrer" content="no-referrer">
    <meta charset="UTF-8">
    <!-- –í–°–¢–ê–í–ò–¢–¨ –°–Æ–î–ê –¢–û–ñ–ï: -->
    <meta name="referrer" content="no-referrer">
    <!-- ... -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brat Camp | Interactive English Lesson</title>
    <style>
        /* ========================================
           1. THEME VARIABLES (Based on Photos)
           ======================================== */
        :root {
            /* Colors extracted from image */
            --primary-red: #b91d1d;       /* Red hoodies color */
            --primary-black: #111111;     /* Grunge headers */
            --paper-bg: #f4f1ea;          /* Old paper texture color */
            --highlight-yellow: rgba(255, 235, 59, 0.3);
            --accent-blue: #2980b9;       /* Words2know box blue */
            --accent-green: #7fb069;      /* Grammar box green */
            
            /* UI Colors */
            --text-main: #2d3436;
            --text-muted: #636e72;
            --card-bg: #ffffff;
            --shadow-soft: 0 8px 30px rgba(0,0,0,0.08);
            --border-radius: 16px;
        }

        /* ========================================
           2. RESET & BASE STYLES
           ======================================== */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #e6e2d3;
            background-image: linear-gradient(to bottom, #e6e2d3 0%, #f4f1ea 100%);
            color: var(--text-main);
            line-height: 1.7;
            min-height: 100vh;
            padding-bottom: 60px;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* ========================================
           3. HEADER & NAVIGATION
           ======================================== */
        header {
            text-align: center;
            padding: 40px 0;
            position: relative;
        }

        h1 {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-black);
            text-transform: uppercase;
            letter-spacing: -2px;
            line-height: 0.9;
            transform: rotate(-2deg);
            text-shadow: 3px 3px 0px var(--paper-bg), 6px 6px 0px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }
        
        /* Grunge style underline */
        h1::after {
            content: '';
            display: block;
            width: 60%;
            height: 10px;
            background: var(--primary-red);
            margin: 10px auto 0;
            transform: skew(-10deg);
            opacity: 0.9;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-muted);
            font-weight: 600;
            letter-spacing: 1px;
            margin-top: 15px;
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 40px;
            background: white;
            padding: 10px;
            border-radius: 50px;
            box-shadow: var(--shadow-soft);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .nav-btn {
            border: none;
            background: transparent;
            padding: 12px 24px;
            border-radius: 40px;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-btn:hover { color: var(--primary-red); background: #fef2f2; }
        
        .nav-btn.active {
            background: var(--primary-black);
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* ========================================
           4. COMMON SECTION STYLES
           ======================================== */
        section { display: none; animation: fadeIn 0.5s ease forwards; }
        section.active { display: block; }

        .card {
            background: var(--card-bg);
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-soft);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        /* Decorative tape effect */
        .card::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 35px;
            background: rgba(255,255,255,0.4);
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            z-index: 10;
        }

        /* ========================================
           5. TEXT TAB STYLES (Reading)
           ======================================== */
        .text-container { font-size: 1.15rem; color: #2c3e50; }
        
        .part-header {
            font-family: 'Impact', sans-serif;
            font-size: 2rem;
            text-transform: uppercase;
            color: var(--primary-black);
            margin: 30px 0 15px;
            transform: rotate(-1deg);
            display: inline-block;
            background: var(--paper-bg);
            padding: 5px 15px;
            border: 2px solid var(--primary-black);
            box-shadow: 4px 4px 0 var(--primary-red);
        }

        .text-block p { margin-bottom: 18px; text-align: justify; }
        
        .highlight {
            background: var(--highlight-yellow);
            border-bottom: 2px solid #fbc531;
            cursor: help;
            padding: 0 2px;
            transition: background 0.2s;
            font-weight: 500;
            position: relative;
        }
        .highlight:hover { background: #fbc531; color: #000; }
        
        /* Tooltip */
        .highlight::after {
            content: attr(data-trans);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            background: var(--primary-black);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: 0.2s;
            z-index: 100;
        }
        .highlight:hover::after { opacity: 1; transform: translateX(-50%) translateY(-4px); }

        /* Rules List Styling */
        .rules-list {
            list-style: none;
            margin: 20px 0;
            padding-left: 10px;
        }
        .rules-list li {
            margin-bottom: 15px;
            padding-left: 25px;
            position: relative;
            border-left: 3px solid var(--primary-red);
            padding: 10px 15px;
            background: #f9f9f9;
            border-radius: 0 10px 10px 0;
        }
        .rules-list li::before {
            content: '‚Ä¢';
            color: var(--primary-red);
            font-size: 2rem;
            position: absolute;
            left: -14px;
            top: -5px;
        }

        /* CHECK SECTION (Embedded) */
        .check-section-embedded {
            margin-top: 50px;
            border-top: 3px dashed #ccc;
            padding-top: 30px;
        }
        .check-title {
            text-align: center;
            font-weight: 800;
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--accent-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .tf-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-bottom: 1px solid #eee;
            transition: 0.2s;
        }
        .tf-row:hover { background: #fcfcfc; }
        .tf-text { width: 70%; font-weight: 500; }
        .tf-controls { display: flex; gap: 10px; }
        
        .btn-tf {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid #eee;
            background: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-tf:hover { transform: scale(1.1); }
        
        .btn-true { color: #27ae60; }
        .btn-false { color: #c0392b; }
        
        .btn-tf.correct { background: #27ae60; color: white; border-color: #27ae60; }
        .btn-tf.wrong { background: #c0392b; color: white; border-color: #c0392b; animation: shake 0.4s; }
        .tf-feedback { 
            display: block; width: 100%; font-size: 0.9rem; 
            margin-top: 5px; font-style: italic; color: #7f8c8d; 
            padding-left: 15px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .card { padding: 20px; }
            .tf-row { flex-direction: column; align-items: flex-start; gap: 10px; }
            .tf-controls { width: 100%; justify-content: flex-end; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Brat Camp</h1>
        <div class="subtitle">Turning Out-of-Control Teenagers Around</div>
    </header>

    <!-- Nav menu: 'Check' removed as distinct tab -->
    <nav>
        <button class="nav-btn active" onclick="switchTab('text')">üìñ Reading</button>
        <button class="nav-btn" onclick="switchTab('phrases')">üí¨ Phrases</button>
        <button class="nav-btn" onclick="switchTab('vocabulary')">üìö Vocabulary</button>
        <button class="nav-btn" onclick="switchTab('grammar')">‚úèÔ∏è Grammar</button>
        <button class="nav-btn" onclick="switchTab('practice')">‚ö° Practice</button>
    </nav>

    <!-- TAB 1: TEXT (FULL CONTENT + CHECK) -->
    <section id="text" class="active">
        <div class="card">
            
            <!-- PART 1 TEXT -->
            <h2 class="part-header">Part 1</h2>
            <div class="text-container text-block">
                <p>
                    <span style="font-size:3rem; float:left; line-height:0.8; margin-right:8px; font-family:'Impact'">E</span>d, sixteen, is an <span class="highlight" data-trans="–Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π" onclick="speak('out of control')">out-of-control</span> teenager. He lives in a comfortable home in North London with his parents and younger sister but something in Ed‚Äôs life is <span class="highlight" data-trans="–∏–¥–µ—Ç –Ω–µ —Ç–∞–∫" onclick="speak('going wrong')">going wrong</span>.
                </p>
                <p>
                    He is <span class="highlight" data-trans="–ø–ª–æ—Ö–æ —É—Å–ø–µ–≤–∞–µ—Ç" onclick="speak('doing badly')">doing badly</span> at school and often <span class="highlight" data-trans="–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É—Ä–æ–∫–∏" onclick="speak('misses lessons')">misses lessons</span>. His teachers say he needs professional help but Ed <span class="highlight" data-trans="–æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è" onclick="speak('refuses')">refuses</span> to see anyone. He uses drugs and alcohol <span class="highlight" data-trans="—Ä–µ–≥—É–ª—è—Ä–Ω–æ" onclick="speak('regularly')">regularly</span> and he often has <span class="highlight" data-trans="—Å—Å–æ—Ä—ã" onclick="speak('arguments')">arguments</span> with his parents. He also gets into <span class="highlight" data-trans="–ø–æ–ø–∞–¥–∞–µ—Ç –≤ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–∏" onclick="speak('trouble')">trouble</span> for <span class="highlight" data-trans="–≤–æ—Ä–æ–≤—Å—Ç–≤–æ" onclick="speak('stealing')">stealing</span>.
                </p>
                <p>
                    His parents cannot understand him. His mother, Sheila, says, 'We try to <span class="highlight" data-trans="–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∏—Ä–æ–≤–∞—Ç—å" onclick="speak('discipline')">discipline</span> him but he doesn‚Äôt <span class="highlight" data-trans="–Ω–µ –æ–±—Ä–∞—â–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è" onclick="speak('take any notice')">take any notice</span>. Every day‚Äôs a <span class="highlight" data-trans="–±–∏—Ç–≤–∞" onclick="speak('battle')">battle</span>. We just don‚Äôt know what to do.'
                </p>
                <p style="border-left: 4px solid var(--primary-black); padding-left: 15px; font-style: italic; color: #555;">
                    According to Ed, 'I try not to spend too much time with my parents because we always have arguments. I don‚Äôt <span class="highlight" data-trans="–ª–∞–¥–∏—Ç—å —Å –∫–µ–º-—Ç–æ" onclick="speak('get on with')">get on with</span> them, end of story.'
                </p>
            </div>

            <!-- PART 2 TEXT -->
            <h2 class="part-header">Part 2</h2>
            <div class="text-container text-block">
                <p>
                    Ed‚Äôs parents heard about ‚ÄòBrat Camps‚Äô in the USA. These are camps where difficult teenagers live far away from other people, in an atmosphere of <span class="highlight" data-trans="—Å—Ç—Ä–æ–≥–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞" onclick="speak('strict discipline')">strict discipline</span> and hard work. They decided to send Ed to ‚ÄòTurnaround Camp‚Äô in the <span class="highlight" data-trans="–ø—É—Å—Ç—ã–Ω—è –ê—Ä–∏–∑–æ–Ω—ã" onclick="speak('Arizona desert')">Arizona desert</span>. Here are some of the rules:
                </p>
                <ul class="rules-list">
                    <li>There is no contact with friends or family. Parents can phone and check on their children but teenagers aren‚Äôt allowed to phone their parents.</li>
                    <li>Students do all the <span class="highlight" data-trans="—Ä–∞–±–æ—Ç–∞ –ø–æ –¥–æ–º—É" onclick="speak('housework')">housework</span>, as well as normal schoolwork. They have to prepare their own meals and eat together.</li>
                    <li>Students can‚Äôt have mobile phones, TV, MP3 players or computer games.</li>
                    <li>Students have to wear <span class="highlight" data-trans="–ª–∞–≥–µ—Ä–Ω–∞—è —Ñ–æ—Ä–º–∞" onclick="speak('camp uniform')">camp uniform</span>. They aren‚Äôt allowed to wear make-up, hair products or <span class="highlight" data-trans="—É–∫—Ä–∞—à–µ–Ω–∏—è" onclick="speak('jewellery')">jewellery</span>.</li>
                    <li>There is strictly no bad language, smoking, alcohol or drugs.</li>
                    <li>There are no beds ‚Äì students sleep outside in tents. Wake-up time is 6.30 a.m.</li>
                    <li>If students break the rules, they have to move to a special tent and are not allowed to speak to anyone.</li>
                    <li>If they behave well, they get small rewards ‚Äì they are allowed to eat cakes or watch a little TV.</li>
                    <li>Sunday is a rest-day ‚Äì students don‚Äôt have to work and they can talk about their problems with camp <span class="highlight" data-trans="–≤–æ–∂–∞—Ç—ã–µ/–ø—Å–∏—Ö–æ–ª–æ–≥–∏" onclick="speak('counsellors')">counsellors</span>.</li>
                    <li>Camp counsellors are with the students twenty-four hours a day, as teachers, friends and helpers.</li>
                </ul>
            </div>

            <!-- READING CHECK (EMBEDDED) -->
            <div class="check-section-embedded">
                <h3 class="check-title">Reading Check ‚úîÔ∏è‚ùå</h3>
                <p style="text-align:center; color:#7f8c8d; margin-bottom:20px;">Read the text above and mark True or False.</p>
                
                <div id="tf-container">
                    <!-- TF Items will be injected by JS -->
                </div>
            </div>

        </div>
    </section>

     <!-- TAB 2: PHRASES -->
    <style>
        .phrase-item {
            display: flex;
            align-items: center;
            background: white;
            margin-bottom: 15px;
            padding: 15px 20px;
            border-radius: 12px;
            border-left: 5px solid var(--accent-blue);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: 0.2s;
            cursor: pointer;
        }
        .phrase-item:hover { transform: translateX(5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .phrase-content { flex: 1; }
        .phrase-en { font-weight: 700; font-size: 1.1rem; color: var(--primary-black); }
        .phrase-ru { font-size: 0.9rem; color: var(--text-muted); margin-top: 2px; }
        .btn-audio {
            background: #f0f2f5;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: var(--accent-blue);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
        }
        .btn-audio:hover { background: var(--accent-blue); color: white; }
    </style>
    <section id="phrases">
        <div class="card">
            <h2 style="margin-bottom:25px; color:var(--primary-black);">Phrases to Know üí¨</h2>
            <!-- Content populated from Words2know image section -->
            <div class="phrase-item" onclick="speak('get on with someone')">
                <div class="phrase-content">
                    <div class="phrase-en">get on with someone</div>
                    <div class="phrase-ru">–ª–∞–¥–∏—Ç—å —Å –∫–µ–º-—Ç–æ</div>
                </div>
                <button class="btn-audio">üîä</button>
            </div>
            <div class="phrase-item" onclick="speak('have an argument with someone')">
                <div class="phrase-content">
                    <div class="phrase-en">have an argument with someone</div>
                    <div class="phrase-ru">—Å—Å–æ—Ä–∏—Ç—å—Å—è —Å –∫–µ–º-—Ç–æ</div>
                </div>
                <button class="btn-audio">üîä</button>
            </div>
            <div class="phrase-item" onclick="speak('do badly at school')">
                <div class="phrase-content">
                    <div class="phrase-en">do badly at school</div>
                    <div class="phrase-ru">–ø–ª–æ—Ö–æ —É—á–∏—Ç—å—Å—è –≤ —à–∫–æ–ª–µ</div>
                </div>
                <button class="btn-audio">üîä</button>
            </div>
            <div class="phrase-item" onclick="speak('get into trouble')">
                <div class="phrase-content">
                    <div class="phrase-en">get into trouble</div>
                    <div class="phrase-ru">–ø–æ–ø–∞–¥–∞—Ç—å –≤ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–∏</div>
                </div>
                <button class="btn-audio">üîä</button>
            </div>
            <div class="phrase-item" onclick="speak('go wrong')">
                <div class="phrase-content">
                    <div class="phrase-en">go wrong</div>
                    <div class="phrase-ru">–∏–¥—Ç–∏ –Ω–µ —Ç–∞–∫ / –Ω–µ –ª–∞–¥–∏—Ç—å—Å—è</div>
                </div>
                <button class="btn-audio">üîä</button>
            </div>
            <div class="phrase-item" onclick="speak('not take any notice')">
                <div class="phrase-content">
                    <div class="phrase-en">not take any notice</div>
                    <div class="phrase-ru">–Ω–µ –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏—è</div>
                </div>
                <button class="btn-audio">üîä</button>
            </div>
        </div>
    </section>

    <!-- TAB 3: VOCABULARY (List & Flashcards) -->
    <style>
        .vocab-controls { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; }
        .v-btn {
            padding: 8px 20px; background: #e0e0e0; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; color: #555;
        }
        .v-btn.active { background: var(--primary-black); color: white; }

        /* List Grid */
        .vocab-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px; }
        .vocab-card {
            background: white; border: 1px solid #eee; padding: 20px; border-radius: 10px; text-align: center;
            cursor: pointer; transition: 0.2s;
        }
        .vocab-card:hover { border-color: var(--accent-blue); transform: translateY(-3px); }
        
        /* 3D Flashcard */
        .scene { width: 100%; max-width: 400px; height: 260px; margin: 0 auto; perspective: 1000px; }
        .flashcard {
            width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer;
        }
        .flashcard.is-flipped { transform: rotateY(180deg); }
        .card-face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 15px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .card-front { background: white; color: var(--primary-black); border: 2px solid var(--primary-black); }
        .card-back { background: var(--primary-black); color: white; transform: rotateY(180deg); }
        .fc-word { font-size: 2rem; font-weight: 800; margin-bottom: 10px; }
        .fc-sub { font-size: 0.9rem; opacity: 0.6; }
        
        .fc-nav { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
        .fc-btn {
            width: 50px; height: 50px; border-radius: 50%; border: none; background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-size: 1.2rem; cursor: pointer; transition: 0.2s;
        }
        .fc-btn:hover { background: var(--primary-red); color: white; }
    </style>
    <section id="vocabulary">
        <div class="card">
            <div class="vocab-controls">
                <button class="v-btn active" onclick="setMode('list')">üìã List</button>
                <button class="v-btn" onclick="setMode('flashcards')">üî• Flashcards</button>
            </div>

            <!-- List View -->
            <div id="view-list">
                <div class="vocab-grid" id="vocab-grid"></div>
            </div>

            <!-- Flashcard View -->
            <div id="view-flashcards" style="display:none;">
                <div class="scene">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="card-face card-front">
                            <div class="fc-word" id="fc-front">Word</div>
                            <div class="fc-sub">Tap to flip</div>
                        </div>
                        <div class="card-face card-back">
                            <div class="fc-word" id="fc-back">Translation</div>
                        </div>
                    </div>
                </div>
                <div style="text-align:center; margin-top:15px; color:#888;" id="fc-counter">1 / 10</div>
                <div class="fc-nav">
                    <button class="fc-btn" onclick="prevCard()">‚¨Ö</button>
                    <button class="fc-btn" onclick="shuffleCards()">üîÄ</button>
                    <button class="fc-btn" onclick="nextCard()">‚û°</button>
                </div>
            </div>
        </div>
    </section>

    <!-- TAB 4: GRAMMAR -->
    <style>
        .grammar-rule-box {
            background: #ecf9f1; border-left: 5px solid var(--accent-green); padding: 20px; border-radius: 0 10px 10px 0; margin-bottom: 20px;
        }
        .g-title { font-weight: 800; color: var(--accent-green); margin-bottom: 10px; display:block; }
        .g-example { background: rgba(255,255,255,0.7); padding: 8px; border-radius: 6px; margin-top: 5px; font-style: italic; display: inline-block;}
        .interactive-g { display: grid; gap: 10px; margin-top: 20px; }
        .g-card {
            border: 1px dashed #ccc; padding: 15px; border-radius: 8px; cursor: pointer; transition: 0.2s;
            display: flex; justify-content: space-between; align-items: center;
        }
        .g-card:hover { background: #f0fff4; border-color: var(--accent-green); }
        .bold-g { color: var(--primary-red); font-weight: bold; }
    </style>
    <section id="grammar">
        <div class="card">
            <h2 style="margin-bottom:20px;">Grammar 2 Know</h2>
            
            <div class="grammar-rule-box">
                <span class="g-title">Permission in the present</span>
                <p>Use <b>can</b> and <b>is/are allowed to</b> for things that are permitted.</p>
                <div class="g-example">"Students <b>are allowed to</b> watch TV if they behave."</div>
                <hr style="margin:15px 0; opacity:0.2;">
                <p>Use <b>can't</b> and <b>is/are not allowed to</b> for things that are NOT permitted.</p>
                <div class="g-example">"Students <b>can't</b> have mobile phones."</div>
            </div>

            <div class="grammar-rule-box">
                <span class="g-title">Obligation in the present</span>
                <p>Use <b>have to</b> for things that are necessary to do.</p>
                <div class="g-example">"They <b>have to</b> cook their own meals."</div>
                <hr style="margin:15px 0; opacity:0.2;">
                <p>Use <b>don't have to</b> for things that are NOT necessary.</p>
            </div>

            <h3>Interactive Examples (Click to listen)</h3>
            <div class="interactive-g">
                <div class="g-card" onclick="speak('Students are not allowed to use bad language.')">
                    <span>Students <span class="bold-g">are not allowed to</span> use bad language.</span> üîà
                </div>
                <div class="g-card" onclick="speak('Students cannot have mobile phones.')">
                    <span>Students <span class="bold-g">can't</span> have mobile phones.</span> üîà
                </div>
                <div class="g-card" onclick="speak('They have to cook their own meals.')">
                    <span>They <span class="bold-g">have to</span> cook their own meals.</span> üîà
                </div>
                <div class="g-card" onclick="speak('Sunday is a rest day, they do not have to work.')">
                    <span>Sunday is a rest day, they <span class="bold-g">don't have to</span> work.</span> üîà
                </div>
            </div>
        </div>
    </section>

    <!-- TAB 5: PRACTICE QUIZ -->
    <style>
        .quiz-q-text { font-size: 1.2rem; font-weight: 700; margin-bottom: 20px; }
        .quiz-option {
            padding: 15px; border: 2px solid #eee; border-radius: 10px; margin-bottom: 10px; cursor: pointer; transition: 0.2s; background: white;
        }
        .quiz-option:hover { background: #f9f9f9; border-color: #bbb; }
        .quiz-option.correct { background: #d4edda; border-color: #28a745; color: #155724; }
        .quiz-option.wrong { background: #f8d7da; border-color: #dc3545; color: #721c24; animation: shake 0.4s; }
        .progress-bar { height: 8px; background: #eee; border-radius: 4px; margin-top: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary-red); width: 0%; transition: 0.5s; }
    </style>
    <section id="practice">
        <div class="card">
            <h2 style="margin-bottom:20px;">Practice Quiz üèÜ</h2>
            
            <div id="quiz-area">
                <div class="quiz-q-text" id="q-text">Loading...</div>
                <div id="q-options"></div>
                <div id="q-feedback" style="margin-top:15px; font-weight:bold; min-height:24px;"></div>
                <button id="next-btn" onclick="nextQuestion()" style="display:none; margin-top:15px; padding:10px 25px; background:var(--primary-black); color:white; border:none; border-radius:20px; cursor:pointer;">Next Question ‚û°</button>
            </div>

            <div class="progress-bar"><div class="progress-fill" id="p-bar"></div></div>
        </div>
    </section>

</div> <!-- End Container -->

<script>
/* ========================================
   DATA SOURCE
   ======================================== */
const vocabDB = [
    { en: "out of control", ru: "–Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π" },
    { en: "discipline", ru: "–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞" },
    { en: "refuse", ru: "–æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—è" },
    { en: "steal", ru: "–≤–æ—Ä–æ–≤–∞—Ç—å" },
    { en: "arguments", ru: "—Å–ø–æ—Ä—ã / —Å—Å–æ—Ä—ã" },
    { en: "tents", ru: "–ø–∞–ª–∞—Ç–∫–∏" },
    { en: "counsellors", ru: "–≤–æ–∂–∞—Ç—ã–µ" },
    { en: "housework", ru: "—Ä–∞–±–æ—Ç–∞ –ø–æ –¥–æ–º—É" },
    { en: "rewards", ru: "–Ω–∞–≥—Ä–∞–¥—ã" },
    { en: "strict", ru: "—Å—Ç—Ä–æ–≥–∏–π" }
];

const quizData = [
    { q: "Where is Turnaround Camp located?", options: ["North London", "Arizona Desert", "New York", "California"], correct: 1 },
    { q: "What time do students have to wake up?", options: ["8:00 a.m.", "7:30 a.m.", "6:30 a.m.", "5:00 a.m."], correct: 2 },
    { q: "Where do students sleep?", options: ["In comfortable beds", "In a hotel", "In tents", "In the bus"], correct: 2 },
    { q: "What happens on Sunday?", options: ["They work hard", "It is a rest day", "They go home", "They use mobile phones"], correct: 1 },
    { q: "What are students allowed to do if they behave well?", options: ["Use mobile phones", "Go to the cinema", "Eat cakes / Watch TV", "Sleep all day"], correct: 2 }
];

const tfData = [
    { text: "Ed is fifteen years old.", isTrue: false, explain: "False. The text says Ed is sixteen." },
    { text: "Students are not allowed to phone their parents.", isTrue: true, explain: "True. Parents can phone, but students can't." },
    { text: "Students don't have to do housework.", isTrue: false, explain: "False. 'Students do all the housework'." },
    { text: "Ed lives in North London.", isTrue: true, explain: "True." },
    { text: "Students can bring MP3 players.", isTrue: false, explain: "False. No mobiles, TV, or MP3s." },
    { text: "Ed has a good relationship with his parents.", isTrue: false, explain: "False. 'We always have arguments'." }
];

/* ========================================
   APP STATE
   ======================================== */
let currentCardIdx = 0;
let currentQuizIdx = 0;
let shuffledDeck = [...vocabDB];

/* ========================================
   FUNCTIONS
   ======================================== */

// --- 1. GENERAL ---
function switchTab(tabId) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    // Simple index matching or event target matching could work, here we assume order
    const tabs = ['text', 'phrases', 'vocabulary', 'grammar', 'practice'];
    const idx = tabs.indexOf(tabId);
    if(idx >= 0) document.querySelectorAll('.nav-btn')[idx].classList.add('active');
}

function speak(text) {
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'en-GB';
    u.rate = 0.9;
    window.speechSynthesis.speak(u);
}

// --- 2. VOCABULARY ---
function initVocab() {
    const grid = document.getElementById('vocab-grid');
    grid.innerHTML = vocabDB.map(w => `
        <div class="vocab-card" onclick="speak('${w.en}')">
            <div style="font-weight:bold; font-size:1.1rem; color:#333;">${w.en}</div>
            <div style="color:#777; margin-top:5px;">${w.ru}</div>
        </div>
    `).join('');
    updateFlashcard();
}

function setMode(mode) {
    document.querySelectorAll('.v-btn').forEach(b => b.classList.remove('active'));
    if(mode === 'list') {
        document.getElementById('view-list').style.display = 'block';
        document.getElementById('view-flashcards').style.display = 'none';
        document.querySelector('.v-btn:nth-child(1)').classList.add('active');
    } else {
        document.getElementById('view-list').style.display = 'none';
        document.getElementById('view-flashcards').style.display = 'block';
        document.querySelector('.v-btn:nth-child(2)').classList.add('active');
    }
}

function updateFlashcard() {
    const card = shuffledDeck[currentCardIdx];
    document.getElementById('fc-front').innerText = card.en;
    document.getElementById('fc-back').innerText = card.ru;
    document.getElementById('fc-counter').innerText = `${currentCardIdx + 1} / ${shuffledDeck.length}`;
    document.getElementById('flashcard').classList.remove('is-flipped');
}

function flipCard() {
    const el = document.getElementById('flashcard');
    el.classList.toggle('is-flipped');
    if(!el.classList.contains('is-flipped')) speak(shuffledDeck[currentCardIdx].en);
}

function nextCard() {
    if(currentCardIdx < shuffledDeck.length - 1) {
        currentCardIdx++;
        updateFlashcard();
    }
}

function prevCard() {
    if(currentCardIdx > 0) {
        currentCardIdx--;
        updateFlashcard();
    }
}

function shuffleCards() {
    shuffledDeck.sort(() => Math.random() - 0.5);
    currentCardIdx = 0;
    updateFlashcard();
}

// --- 3. QUIZ ---
function renderQuiz() {
    const q = quizData[currentQuizIdx];
    document.getElementById('q-text').innerText = `${currentQuizIdx + 1}. ${q.q}`;
    const optsDiv = document.getElementById('q-options');
    optsDiv.innerHTML = '';
    document.getElementById('q-feedback').innerText = '';
    document.getElementById('next-btn').style.display = 'none';

    q.options.forEach((opt, i) => {
        const div = document.createElement('div');
        div.className = 'quiz-option';
        div.innerText = opt;
        div.onclick = () => checkQuiz(i, div, q.correct);
        optsDiv.appendChild(div);
    });

    // Update progress
    document.getElementById('p-bar').style.width = `${(currentQuizIdx / quizData.length) * 100}%`;
}

function checkQuiz(i, el, correctIdx) {
    // Disable all
    const opts = document.querySelectorAll('.quiz-option');
    opts.forEach(o => { o.style.pointerEvents = 'none'; });

    if(i === correctIdx) {
        el.classList.add('correct');
        document.getElementById('q-feedback').innerText = "‚úÖ Correct!";
        document.getElementById('q-feedback').style.color = "green";
    } else {
        el.classList.add('wrong');
        opts[correctIdx].classList.add('correct');
        document.getElementById('q-feedback').innerText = "‚ùå Oops! Correct answer is highlighted.";
        document.getElementById('q-feedback').style.color = "red";
    }
    
    if(currentQuizIdx < quizData.length - 1) {
        document.getElementById('next-btn').style.display = 'inline-block';
    } else {
        document.getElementById('p-bar').style.width = '100%';
        document.getElementById('next-btn').innerText = "Finish";
        document.getElementById('next-btn').style.display = 'inline-block';
        document.getElementById('next-btn').onclick = () => alert("Great job! You finished the quiz.");
    }
}

function nextQuestion() {
    currentQuizIdx++;
    renderQuiz();
}

// --- 4. TRUE/FALSE LOGIC (Embedded in Tab 1) ---
function initTF() {
    const container = document.getElementById('tf-container');
    if(!container) return; // Safety check

    container.innerHTML = tfData.map((item, idx) => `
        <div class="tf-row">
            <div class="tf-text">${item.text}</div>
            <div class="tf-controls">
                <button class="btn-tf btn-true" onclick="checkTF(${idx}, true, this)">‚úî</button>
                <button class="btn-tf btn-false" onclick="checkTF(${idx}, false, this)">‚úñ</button>
            </div>
            <div class="tf-feedback" id="tf-fb-${idx}" style="display:none;"></div>
        </div>
    `).join('');
}

function checkTF(idx, choice, btn) {
    const item = tfData[idx];
    const row = btn.parentElement.parentElement; // tf-row
    const feedback = document.getElementById(`tf-fb-${idx}`);
    
    // Disable buttons in this row
    row.querySelectorAll('.btn-tf').forEach(b => b.style.pointerEvents = 'none');

    if(choice === item.isTrue) {
        btn.classList.add('correct');
        feedback.style.color = '#27ae60';
        feedback.innerText = "Correct! " + (item.explain || "");
    } else {
        btn.classList.add('wrong');
        feedback.style.color = '#c0392b';
        feedback.innerText = "Wrong. " + (item.explain || "");
    }
    feedback.style.display = 'block';
}

// --- INIT ---
document.addEventListener('DOMContentLoaded', () => {
    initVocab();
    renderQuiz();
    initTF();
});
</script>
</body>
</html>

