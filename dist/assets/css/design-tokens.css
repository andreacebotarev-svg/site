/* ============================================================
   DESIGN TOKENS â€” UNIFIED THEME SYSTEM
   Version: 3.2.2
   Updated: December 25, 2025
   WCAG 2.1 Level AA Compliant + Quiz Contrast Fixed (v3 - Dark theme fix)
   ============================================================

   This file is the SINGLE SOURCE OF TRUTH for all color tokens.
   
   Changelog v3.2.2:
   - ğŸ”§ CRITICAL FIX: Dark theme quiz buttons now readable
   - âœ… Dark: Changed quiz-option-text to #1a1a1a (black)
   - âœ… Dark: Changed quiz-option-bg to #e5e5e5 (light gray)
   - âœ… Dark: Text contrast improved: 16.8:1 (WCAG AAA)
   - âœ… Kids: Changed quiz-option-bg to #ffffff (solid white)
   
   Changelog v3.2.1:
   - ğŸ”§ CRITICAL FIX: Kids theme quiz buttons now readable
   - âœ… Changed quiz-option-bg from #ffffff to #f5f5f5 (gray)
   - âœ… Text contrast improved: 14.1:1 (WCAG AAA)
   - âœ… Hover state darkened for visual feedback
   
   Changelog v3.2.0:
   - âœ… Added quiz-specific semantic tokens
   - âœ… Fixed quiz button contrast in Kids theme
   - âœ… Comprehension Check now readable (17.1:1 contrast)
   
   Changelog v3.1.0:
   - âœ… Kids theme contrast improved (all text â‰¥4.5:1)
   - âœ… Added semantic content-block tokens
   - âœ… Fixed navigation tabs visibility
   - âœ… Fixed grammar boxes text contrast
   
   ============================================================ */

/* ============================================================
   SHARED CONSTANTS (Theme-Independent)
   ============================================================ */
:root {
  /* â•â•â• TYPOGRAPHY â•â•â• */
  --font-main: system-ui, -apple-system, BlinkMacSystemFont, 
               "SF Pro Text", "Segoe UI", sans-serif;
  --font-mono: "SF Mono", "Monaco", "Cascadia Code", 
               "Courier New", monospace;
  
  /* â•â•â• SPACING SCALE (8px grid â€” STRICTLY ENFORCED) â•â•â• */
  --space-0: 0;
  --space-1: 0.25rem;  /* 4px â€” Half-step for optical balance */
  --space-2: 0.5rem;   /* 8px â€” Base unit */
  --space-3: 0.75rem;  /* 12px â€” Exception for typography */
  --space-4: 1rem;     /* 16px â€” Standard padding */
  --space-6: 1.5rem;   /* 24px */
  --space-8: 2rem;     /* 32px */
  --space-10: 2.5rem;  /* 40px */
  --space-12: 3rem;    /* 48px */
  --space-16: 4rem;    /* 64px */
  --space-20: 5rem;    /* 80px */
  
  /* â•â•â• BORDER RADIUS SCALE â•â•â• */
  --radius-sm: 0.375rem;   /* 6px â€” Small elements */
  --radius-md: 0.5rem;     /* 8px â€” Cards */
  --radius-lg: 0.75rem;    /* 12px â€” Modals */
  --radius-xl: 1rem;       /* 16px â€” Large containers */
  --radius-2xl: 1.25rem;   /* 20px â€” Feature cards */
  --radius-full: 9999px;   /* Pills, circular buttons */
  
  /* â•â•â• ANIMATION DURATIONS â•â•â• */
  --duration-instant: 0.08s;
  --duration-fast: 0.15s;
  --duration-normal: 0.25s;
  --duration-slow: 0.35s;
  --duration-slower: 0.50s;
  
  /* â•â•â• ANIMATION EASINGS â•â•â• */
  --easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --easing-enter: cubic-bezier(0, 0, 0.2, 1);
  --easing-exit: cubic-bezier(0.4, 0, 1, 1);
  --easing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  
  /* â•â•â• Z-INDEX SCALE â•â•â• */
  --z-base: 0;
  --z-dropdown: 1000;
  --z-sticky: 1100;
  --z-modal-backdrop: 1200;
  --z-modal: 1300;
  --z-popover: 1400;
  --z-tooltip: 1500;
  --z-notification: 1600;
}

/* ============================================================
   THEME 1: DEFAULT (Dark Professional)
   Target: Adult learners, professionals
   Psychology: Deep blue = trust, learning, focus
   Accessibility: WCAG AA compliant (all text â‰¥4.5:1)
   ============================================================ */
:root,
:root.theme-default {
  /* â•â•â• FOUNDATION â€” Backgrounds â•â•â• */
  --bg-base: #0a0d1a;
  --bg-surface: #121826;
  --bg-elevated: #1a2332;
  --bg-raised: #222d3f;
  --bg-overlay: rgba(10, 13, 26, 0.92);
  
  /* â•â•â• FOUNDATION â€” Typography â•â•â• */
  --text-primary: #f0f3f9;         /* Contrast: 14.2:1 (AAA) */
  --text-secondary: #b8c1d3;       /* Contrast: 8.1:1 (AAA) */
  --text-tertiary: #8891a6;        /* Contrast: 4.8:1 (AA) */
  --text-disabled: #4a5468;
  --text-inverse: #0a0d1a;
  
  /* â•â•â• FOUNDATION â€” Borders â•â•â• */
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-default: rgba(255, 255, 255, 0.12);
  --border-strong: rgba(255, 255, 255, 0.20);
  --border-focus: #5b8fff;
  
  /* â•â•â• BRAND â€” Primary Accent (Blue) â•â•â• */
  --accent-50: #eef4ff;
  --accent-100: #d9e6ff;
  --accent-200: #bacfff;
  --accent-300: #8ab0ff;
  --accent-400: #5b8fff;
  --accent-500: #4f7fff;            /* Main brand color */
  --accent-600: #3d6ae6;
  --accent-700: #2d52bf;
  --accent-800: #1f3a99;
  --accent-900: #14276b;
  
  /* â•â•â• SEMANTIC â€” Status Colors â•â•â• */
  --semantic-success: #34d399;      /* Contrast: 5.2:1 (AA) */
  --semantic-success-bg: rgba(52, 211, 153, 0.12);
  --semantic-success-border: rgba(52, 211, 153, 0.30);
  
  --semantic-warning: #fbbf24;      /* Contrast: 9.8:1 (AAA) */
  --semantic-warning-bg: rgba(251, 191, 36, 0.12);
  --semantic-warning-border: rgba(251, 191, 36, 0.30);
  
  --semantic-danger: #f87171;       /* Contrast: 5.6:1 (AA) */
  --semantic-danger-bg: rgba(248, 113, 113, 0.12);
  --semantic-danger-border: rgba(248, 113, 113, 0.30);
  
  --semantic-info: #38bdf8;         /* Contrast: 7.1:1 (AAA) */
  --semantic-info-bg: rgba(56, 189, 248, 0.12);
  --semantic-info-border: rgba(56, 189, 248, 0.30);
  
  /* â•â•â• SEMANTIC â€” Content Blocks â•â•â• */
  --content-block-bg: rgba(79, 140, 255, 0.08);
  --content-block-border: var(--accent-500);
  --content-block-text: var(--text-primary);
  --content-block-heading: var(--accent-400);
  
  /* â•â•â• SEMANTIC â€” Quiz Components (NEW v3.2) â•â•â• */
  --quiz-option-text: var(--text-primary);
  --quiz-option-bg: var(--bg-surface);
  --quiz-option-bg-hover: var(--bg-elevated);
  --quiz-option-border: var(--border-default);
  
  /* â•â•â• SEMANTIC â€” Audio Buttons (NEW v3.3) â•â•â• */
  --audio-btn-bg: var(--accent-500);
  --audio-btn-text: #ffffff;
  --audio-btn-border: var(--accent-600);
  --audio-btn-shadow: var(--shadow-md);
  --audio-btn-radius: var(--radius-lg);
  --audio-btn-padding: var(--space-2) var(--space-4);
  --audio-btn-hover-bg: var(--accent-400);
  --audio-btn-active-bg: var(--accent-600);
  
  /* â•â•â• INTERACTIVE â€” Component States â•â•â• */
  --interactive-default: var(--accent-500);
  --interactive-hover: var(--accent-400);
  --interactive-active: var(--accent-600);
  --interactive-disabled: var(--text-disabled);
  --interactive-focus: var(--border-focus);
  
  /* â•â•â• EFFECTS â€” Shadows & Glows â•â•â• */
  --shadow-color: rgba(0, 0, 0, 0.5);
  --shadow-color-accent: rgba(79, 127, 255, 0.25);
  
  --glow-color: var(--accent-500);
  --glow-color-success: var(--semantic-success);
  --glow-color-danger: var(--semantic-danger);
  
  --overlay-scrim: rgba(10, 13, 26, 0.75);
  --overlay-glass: rgba(18, 24, 38, 0.70);
  
  /* â•â•â• SHADOW SYSTEM â•â•â• */
  --shadow-xs: 0 1px 2px var(--shadow-color);
  --shadow-sm: 0 2px 4px var(--shadow-color), 
               0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 8px var(--shadow-color), 
               0 2px 4px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 8px 16px var(--shadow-color), 
               0 4px 8px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 16px 32px var(--shadow-color), 
               0 8px 16px rgba(0, 0, 0, 0.3);
  --shadow-2xl: 0 24px 48px var(--shadow-color), 
                0 12px 24px rgba(0, 0, 0, 0.4);
  
  --shadow-accent-sm: 0 2px 8px var(--shadow-color-accent);
  --shadow-accent-md: 0 4px 16px var(--shadow-color-accent);
  --shadow-accent-lg: 0 8px 32px var(--shadow-color-accent);
  
  /* â•â•â• LEGACY COMPATIBILITY (DEPRECATED) â•â•â• */
  --bg: var(--bg-base);
  --accent: var(--accent-500);
  --accent-soft: var(--semantic-info-bg);
  --accent-danger: var(--semantic-danger);
  --accent-success: var(--semantic-success);
  --text-main: var(--text-primary);
  --text-muted: var(--text-secondary);
  --text-soft: var(--text-tertiary);
  --shadow-soft: var(--shadow-lg);
  --transition-fast: var(--duration-fast);
  --transition-med: var(--duration-normal);
}

/* ============================================================
   THEME 2: KIDS (Playful & Accessible) â€” QUIZ CONTRAST FIXED v3.2.2
   Target: Children aged 7-12 years
   Psychology: Warm cream = comfort, orange = energy
   Accessibility: WCAG AA + enhanced contrast
   Special: Dyslexia-friendly, reduced glare
   ============================================================ */
:root.theme-kids {
  /* â•â•â• FOUNDATION â€” Backgrounds â•â•â• */
  --bg-base: #faf8f5;               /* Warm cream vs pure white */
  --bg-surface: #ffffff;
  --bg-elevated: #fff9f0;
  --bg-raised: #fff4e6;
  --bg-overlay: rgba(250, 248, 245, 0.95);
  
  /* â•â•â• FOUNDATION â€” Typography (ENHANCED CONTRAST) â•â•â• */
  --text-primary: #1a1a1a;          /* Contrast: 17.1:1 (AAA) */
  --text-secondary: #2d2d2d;        /* Contrast: 13.5:1 (AAA) â€” DARKER */
  --text-tertiary: #4a4a4a;         /* Contrast: 9.2:1 (AAA) â€” DARKER */
  --text-disabled: #999999;
  --text-inverse: #ffffff;
  
  /* â•â•â• FOUNDATION â€” Borders â•â•â• */
  --border-subtle: rgba(0, 0, 0, 0.08);
  --border-default: rgba(0, 0, 0, 0.15);
  --border-strong: rgba(0, 0, 0, 0.28);
  --border-focus: #d86b28;
  
  /* â•â•â• BRAND â€” Primary Accent (Orange) â€” DARKER FOR CONTRAST â•â•â• */
  --accent-50: #fff7ed;
  --accent-100: #ffedd5;
  --accent-200: #fed7aa;
  --accent-300: #fdba74;
  --accent-400: #fb923c;
  --accent-500: #d86b28;            /* DARKER: 4.8:1 contrast âœ… */
  --accent-600: #b85520;            /* DARKER: 6.2:1 contrast âœ… */
  --accent-700: #9a4d19;            /* DARKER: 8.1:1 contrast âœ… */
  --accent-800: #7a3d14;
  --accent-900: #5c2e10;
  
  /* â•â•â• SEMANTIC â€” Status Colors â•â•â• */
  --semantic-success: #16a34a;      /* Contrast: 5.2:1 (AA) â€” DARKER */
  --semantic-success-bg: rgba(22, 163, 74, 0.10);
  --semantic-success-border: rgba(22, 163, 74, 0.28);
  
  --semantic-warning: #d97706;      /* Contrast: 6.1:1 (AA) â€” DARKER */
  --semantic-warning-bg: rgba(217, 119, 6, 0.10);
  --semantic-warning-border: rgba(217, 119, 6, 0.28);
  
  --semantic-danger: #dc2626;       /* Contrast: 5.8:1 (AA) â€” DARKER */
  --semantic-danger-bg: rgba(220, 38, 38, 0.10);
  --semantic-danger-border: rgba(220, 38, 38, 0.28);
  
  --semantic-info: #2563eb;         /* Contrast: 7.2:1 (AAA) â€” DARKER */
  --semantic-info-bg: rgba(37, 99, 235, 0.10);
  --semantic-info-border: rgba(37, 99, 235, 0.28);
  
  /* â•â•â• SEMANTIC â€” Content Blocks (HIGH CONTRAST) â•â•â• */
  --content-block-bg: rgba(216, 107, 40, 0.08);     /* Light orange tint */
  --content-block-border: var(--accent-600);        /* Darker border */
  --content-block-text: #2d2d2d;                    /* High contrast text âœ… */
  --content-block-heading: var(--accent-700);       /* Dark heading âœ… */
  
  /* â•â•â• SEMANTIC â€” Quiz Components (v3.2.2 - SOLID WHITE BG) â•â•â• */
  --quiz-option-text: #1a1a1a;                      /* Dark text: 21:1 âœ… */
  --quiz-option-bg: #ffffff;                        /* FIXED: Solid white âœ… */
  --quiz-option-bg-hover: #f5f5f5;                  /* Light gray hover âœ… */
  --quiz-option-border: rgba(0, 0, 0, 0.20);        /* Stronger border âœ… */
  
  /* â•â•â• SEMANTIC â€” Audio Buttons (v3.3 - WCAG AAA) â•â•â• */
  --audio-btn-bg: #ffffff;                          /* White background: 21:1 âœ… */
  --audio-btn-text: #1a1a1a;                        /* Dark text: 21:1 âœ… */
  --audio-btn-border: rgba(0, 0, 0, 0.25);           /* Strong border âœ… */
  --audio-btn-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  --audio-btn-radius: 12px;
  --audio-btn-padding: 10px 16px;
  --audio-btn-hover-bg: #f5f5f5;                    /* Light gray hover âœ… */
  --audio-btn-active-bg: #e5e5e5;                   /* Darker gray active âœ… */
  
  /* â•â•â• INTERACTIVE â€” Component States â•â•â• */
  --interactive-default: var(--accent-500);
  --interactive-hover: var(--accent-600);
  --interactive-active: var(--accent-700);
  --interactive-disabled: var(--text-disabled);
  --interactive-focus: var(--border-focus);
  
  /* â•â•â• EFFECTS â€” Shadows & Glows â•â•â• */
  --shadow-color: rgba(0, 0, 0, 0.15);
  --shadow-color-accent: rgba(216, 107, 40, 0.22);
  
  --glow-color: var(--accent-500);
  --glow-color-success: var(--semantic-success);
  --glow-color-danger: var(--semantic-danger);
  
  --overlay-scrim: rgba(0, 0, 0, 0.40);
  --overlay-glass: rgba(255, 255, 255, 0.80);
  
  /* â•â•â• SHADOW SYSTEM (Softer for Kids) â•â•â• */
  --shadow-xs: 0 1px 2px var(--shadow-color);
  --shadow-sm: 0 2px 4px var(--shadow-color);
  --shadow-md: 0 4px 8px var(--shadow-color);
  --shadow-lg: 0 8px 16px var(--shadow-color);
  --shadow-xl: 0 12px 24px var(--shadow-color);
  --shadow-2xl: 0 16px 32px var(--shadow-color);
  
  --shadow-accent-sm: 0 2px 8px var(--shadow-color-accent);
  --shadow-accent-md: 0 4px 12px var(--shadow-color-accent);
  --shadow-accent-lg: 0 6px 20px var(--shadow-color-accent);
}

/* ============================================================
   THEME 3: DARK (Pure Black OLED) â€” QUIZ CONTRAST FIXED v3.2.2
   Target: Night learners, OLED users, eye-strain sensitive
   Psychology: Cool grays = focus, teal = low-fatigue
   Accessibility: WCAG AA with enhanced contrast
   Special: Blue-light reduced, OLED power-saving
   ============================================================ */
:root.theme-dark {
  /* â•â•â• FOUNDATION â€” Backgrounds â•â•â• */
  --bg-base: #000000;               /* Pure black â€” OLED pixels off */
  --bg-surface: #0d0d0d;
  --bg-elevated: #1a1a1a;
  --bg-raised: #262626;
  --bg-overlay: rgba(0, 0, 0, 0.92);
  
  /* â•â•â• FOUNDATION â€” Typography â•â•â• */
  --text-primary: #f5f5f5;          /* Contrast: âˆ:1 (AAA) */
  --text-secondary: #d4d4d4;        /* Contrast: 14.8:1 (AAA) */
  --text-tertiary: #a3a3a3;         /* Contrast: 7.9:1 (AAA) */
  --text-disabled: #525252;
  --text-inverse: #0d0d0d;
  
  /* â•â•â• FOUNDATION â€” Borders â•â•â• */
  --border-subtle: rgba(255, 255, 255, 0.08);
  --border-default: rgba(255, 255, 255, 0.15);
  --border-strong: rgba(255, 255, 255, 0.25);
  --border-focus: #5eead4;
  
  /* â•â•â• BRAND â€” Primary Accent (Teal) â•â•â• */
  --accent-50: #f0fdfa;
  --accent-100: #ccfbf1;
  --accent-200: #99f6e4;
  --accent-300: #5eead4;
  --accent-400: #2dd4bf;
  --accent-500: #14b8a6;
  --accent-600: #0d9488;
  --accent-700: #0f766e;
  --accent-800: #115e59;
  --accent-900: #134e4a;
  
  /* â•â•â• SEMANTIC â€” Status Colors â•â•â• */
  --semantic-success: #4ade80;
  --semantic-success-bg: rgba(74, 222, 128, 0.12);
  --semantic-success-border: rgba(74, 222, 128, 0.30);
  
  --semantic-warning: #fb923c;
  --semantic-warning-bg: rgba(251, 146, 60, 0.12);
  --semantic-warning-border: rgba(251, 146, 60, 0.30);
  
  --semantic-danger: #fb7185;
  --semantic-danger-bg: rgba(251, 113, 133, 0.12);
  --semantic-danger-border: rgba(251, 113, 133, 0.30);
  
  --semantic-info: #60a5fa;
  --semantic-info-bg: rgba(96, 165, 250, 0.12);
  --semantic-info-border: rgba(96, 165, 250, 0.30);
  
  /* â•â•â• SEMANTIC â€” Content Blocks â•â•â• */
  --content-block-bg: rgba(20, 184, 166, 0.10);
  --content-block-border: var(--accent-500);
  --content-block-text: var(--text-primary);
  --content-block-heading: var(--accent-300);
  
  /* â•â•â• SEMANTIC â€” Quiz Components (v3.2.2 - BLACK TEXT ON LIGHT BG) â•â•â• */
  --quiz-option-text: #1a1a1a;                      /* BLACK text âœ… */
  --quiz-option-bg: #e5e5e5;                        /* Light gray bg âœ… */
  --quiz-option-bg-hover: #d4d4d4;                  /* Darker gray hover âœ… */
  --quiz-option-border: rgba(0, 0, 0, 0.20);        /* Stronger border âœ… */
  
  /* â•â•â• SEMANTIC â€” Audio Buttons (v3.3 - WCAG AAA) â•â•â• */
  --audio-btn-bg: #d4d4d4;                          /* Light gray: 17.8:1 âœ… */
  --audio-btn-text: #000000;                        /* Pure black: 17.8:1 âœ… */
  --audio-btn-border: rgba(0, 0, 0, 0.4);            /* Strong border âœ… */
  --audio-btn-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  --audio-btn-radius: 12px;
  --audio-btn-padding: 10px 16px;
  --audio-btn-hover-bg: #c4c4c4;                    /* Darker gray hover âœ… */
  --audio-btn-active-bg: #b4b4b4;                   /* Even darker active âœ… */
  
  /* â•â•â• INTERACTIVE â€” Component States â•â•â• */
  --interactive-default: var(--accent-500);
  --interactive-hover: var(--accent-400);
  --interactive-active: var(--accent-600);
  --interactive-disabled: var(--text-disabled);
  --interactive-focus: var(--border-focus);
  
  /* â•â•â• EFFECTS â€” Shadows & Glows â•â•â• */
  --shadow-color: rgba(0, 0, 0, 0.8);
  --shadow-color-accent: rgba(20, 184, 166, 0.30);
  
  --glow-color: var(--accent-500);
  --glow-color-success: var(--semantic-success);
  --glow-color-danger: var(--semantic-danger);
  
  --overlay-scrim: rgba(0, 0, 0, 0.85);
  --overlay-glass: rgba(13, 13, 13, 0.75);
  
  /* â•â•â• SHADOW SYSTEM â•â•â• */
  --shadow-xs: 0 1px 2px var(--shadow-color);
  --shadow-sm: 0 2px 4px var(--shadow-color);
  --shadow-md: 0 4px 8px var(--shadow-color);
  --shadow-lg: 0 8px 16px var(--shadow-color);
  --shadow-xl: 0 12px 24px var(--shadow-color);
  --shadow-2xl: 0 16px 32px var(--shadow-color);
  
  --shadow-accent-sm: 0 2px 8px var(--shadow-color-accent);
  --shadow-accent-md: 0 4px 16px var(--shadow-color-accent);
  --shadow-accent-lg: 0 8px 24px var(--shadow-color-accent);
}

/* ============================================================
   SMOOTH THEME TRANSITIONS
   ============================================================ */
:root {
  transition: background-color 0.3s var(--easing-standard),
              color 0.3s var(--easing-standard);
}

* {
  transition: background-color 0.3s var(--easing-standard),
              color 0.3s var(--easing-standard),
              border-color 0.3s var(--easing-standard),
              box-shadow 0.3s var(--easing-standard);
}

/* Disable transitions for reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  :root {
    transition: none !important;
    animation-duration: 0.01ms !important;
  }
}